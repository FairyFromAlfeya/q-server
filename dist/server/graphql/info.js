"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.infoResolvers = void 0;

var _utils = require("../utils");

const {
  version
} = (0, _utils.packageJson)();

async function info(_parent, _args, context) {
  const latency = await context.data.getLatency();
  return {
    version,
    time: Date.now(),
    lastBlockTime: latency.lastBlockTime,
    blocksLatency: latency.blocks.latency,
    transactionsLatency: latency.transactions.latency,
    messagesLatency: latency.messages.latency,
    latency: context.data.debugLatency === 0 ? latency.latency : context.data.debugLatency,
    endpoints: context.config.endpoints
  };
}

const infoResolvers = {
  Query: {
    info
  }
};
exports.infoResolvers = infoResolvers;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2ZXIvZ3JhcGhxbC9pbmZvLmpzIl0sIm5hbWVzIjpbInZlcnNpb24iLCJpbmZvIiwiX3BhcmVudCIsIl9hcmdzIiwiY29udGV4dCIsImxhdGVuY3kiLCJkYXRhIiwiZ2V0TGF0ZW5jeSIsInRpbWUiLCJEYXRlIiwibm93IiwibGFzdEJsb2NrVGltZSIsImJsb2Nrc0xhdGVuY3kiLCJibG9ja3MiLCJ0cmFuc2FjdGlvbnNMYXRlbmN5IiwidHJhbnNhY3Rpb25zIiwibWVzc2FnZXNMYXRlbmN5IiwibWVzc2FnZXMiLCJkZWJ1Z0xhdGVuY3kiLCJlbmRwb2ludHMiLCJjb25maWciLCJpbmZvUmVzb2x2ZXJzIiwiUXVlcnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7QUFHQSxNQUFNO0FBQUVBLEVBQUFBO0FBQUYsSUFBYyx5QkFBcEI7O0FBYUEsZUFBZUMsSUFBZixDQUFvQkMsT0FBcEIsRUFBa0NDLEtBQWxDLEVBQThDQyxPQUE5QyxFQUErRjtBQUMzRixRQUFNQyxPQUFPLEdBQUcsTUFBTUQsT0FBTyxDQUFDRSxJQUFSLENBQWFDLFVBQWIsRUFBdEI7QUFDQSxTQUFPO0FBQ0hQLElBQUFBLE9BREc7QUFFSFEsSUFBQUEsSUFBSSxFQUFFQyxJQUFJLENBQUNDLEdBQUwsRUFGSDtBQUdIQyxJQUFBQSxhQUFhLEVBQUVOLE9BQU8sQ0FBQ00sYUFIcEI7QUFJSEMsSUFBQUEsYUFBYSxFQUFFUCxPQUFPLENBQUNRLE1BQVIsQ0FBZVIsT0FKM0I7QUFLSFMsSUFBQUEsbUJBQW1CLEVBQUVULE9BQU8sQ0FBQ1UsWUFBUixDQUFxQlYsT0FMdkM7QUFNSFcsSUFBQUEsZUFBZSxFQUFFWCxPQUFPLENBQUNZLFFBQVIsQ0FBaUJaLE9BTi9CO0FBT0hBLElBQUFBLE9BQU8sRUFBRUQsT0FBTyxDQUFDRSxJQUFSLENBQWFZLFlBQWIsS0FBOEIsQ0FBOUIsR0FBa0NiLE9BQU8sQ0FBQ0EsT0FBMUMsR0FBb0RELE9BQU8sQ0FBQ0UsSUFBUixDQUFhWSxZQVB2RTtBQVFIQyxJQUFBQSxTQUFTLEVBQUVmLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZUQ7QUFSdkIsR0FBUDtBQVVIOztBQUVNLE1BQU1FLGFBQWEsR0FBRztBQUN6QkMsRUFBQUEsS0FBSyxFQUFFO0FBQ0hyQixJQUFBQTtBQURHO0FBRGtCLENBQXRCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuaW1wb3J0IHsgcGFja2FnZUpzb24gfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgdHlwZSB7IEdyYXBoUUxSZXF1ZXN0Q29udGV4dEV4IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuXG5jb25zdCB7IHZlcnNpb24gfSA9IHBhY2thZ2VKc29uKCk7XG5cbnR5cGUgSW5mbyA9IHtcbiAgICB2ZXJzaW9uOiBzdHJpbmcsXG4gICAgdGltZTogbnVtYmVyLFxuICAgIGxhc3RCbG9ja1RpbWU6IG51bWJlcixcbiAgICBibG9ja3NMYXRlbmN5OiBudW1iZXIsXG4gICAgdHJhbnNhY3Rpb25zTGF0ZW5jeTogbnVtYmVyLFxuICAgIG1lc3NhZ2VzTGF0ZW5jeTogbnVtYmVyLFxuICAgIGxhdGVuY3k6IG51bWJlcixcbiAgICBlbmRwb2ludHM6IHN0cmluZ1tdLFxufVxuXG5hc3luYyBmdW5jdGlvbiBpbmZvKF9wYXJlbnQ6IGFueSwgX2FyZ3M6IGFueSwgY29udGV4dDogR3JhcGhRTFJlcXVlc3RDb250ZXh0RXgpOiBQcm9taXNlPEluZm8+IHtcbiAgICBjb25zdCBsYXRlbmN5ID0gYXdhaXQgY29udGV4dC5kYXRhLmdldExhdGVuY3koKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICBsYXN0QmxvY2tUaW1lOiBsYXRlbmN5Lmxhc3RCbG9ja1RpbWUsXG4gICAgICAgIGJsb2Nrc0xhdGVuY3k6IGxhdGVuY3kuYmxvY2tzLmxhdGVuY3ksXG4gICAgICAgIHRyYW5zYWN0aW9uc0xhdGVuY3k6IGxhdGVuY3kudHJhbnNhY3Rpb25zLmxhdGVuY3ksXG4gICAgICAgIG1lc3NhZ2VzTGF0ZW5jeTogbGF0ZW5jeS5tZXNzYWdlcy5sYXRlbmN5LFxuICAgICAgICBsYXRlbmN5OiBjb250ZXh0LmRhdGEuZGVidWdMYXRlbmN5ID09PSAwID8gbGF0ZW5jeS5sYXRlbmN5IDogY29udGV4dC5kYXRhLmRlYnVnTGF0ZW5jeSxcbiAgICAgICAgZW5kcG9pbnRzOiBjb250ZXh0LmNvbmZpZy5lbmRwb2ludHMsXG4gICAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGluZm9SZXNvbHZlcnMgPSB7XG4gICAgUXVlcnk6IHtcbiAgICAgICAgaW5mbyxcbiAgICB9LFxufTtcbiJdfQ==