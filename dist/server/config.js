"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureProtocol = ensureProtocol;
exports.parseDbConfig = parseDbConfig;
exports.resolveOptions = resolveOptions;
exports.createConfig = createConfig;
exports.STATS = exports.BLOCKCHAIN_DB = exports.defaultOptions = exports.QRequestsMode = void 0;

var _os = _interopRequireDefault(require("os"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Copyright 2018-2020 TON DEV SOLUTIONS LTD.
 *
 * Licensed under the SOFTWARE EVALUATION License (the "License"); you may not use
 * this file except in compliance with the License.  You may obtain a copy of the
 * License at:
 *
 * http://www.ton.dev/licenses
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific TON DEV software governing permissions and
 * limitations under the License.
 */
const QRequestsMode = {
  kafka: 'kafka',
  rest: 'rest'
};
exports.QRequestsMode = QRequestsMode;

function ensureProtocol(address, defaultProtocol) {
  return /^\w+:\/\//gi.test(address) ? address : `${defaultProtocol}://${address}`;
}

function getIp() {
  const ipv4 = Object.values(_os.default.networkInterfaces()).reduce((acc, x) => acc.concat(x), []).find(x => x.family === 'IPv4' && !x.internal);
  return ipv4 && ipv4.address;
}

function parseTags(s) {
  const tags = {};
  s.split(',').forEach(t => {
    const i = t.indexOf('=');

    if (i >= 0) {
      tags[t.substr(0, i)] = t.substr(i + 1);
    } else {
      tags[t] = '';
    }
  });
  return tags;
}

function parseDbConfig(config, defMaxSockets) {
  const lowerCased = config.toLowerCase().trim();
  const hasProtocol = lowerCased.startsWith('http:') || lowerCased.startsWith('https:');
  const url = new URL(hasProtocol ? config : `https://${config}`);
  const protocol = url.protocol || 'https:';
  const host = url.port ? url.host : `${url.host}:8059`;
  const path = url.pathname !== '/' ? url.pathname : '';
  return {
    server: `${protocol}//${host}${path}`,
    auth: url.username && `${url.username}:${url.password}`,
    name: url.searchParams.get('name') || 'blockchain',
    maxSockets: Number.parseInt(url.searchParams.get('maxSockets') || defMaxSockets)
  };
}

const defaultOptions = {
  host: getIp(),
  port: '4000',
  rpcPort: '',
  requestsMode: 'kafka',
  requestsServer: 'kafka:9092',
  requestsTopic: 'requests',
  dataAccounts: 'arangodb',
  dataHot: 'arangodb',
  dataCold: '',
  dataColdCache: '',
  slowQueriesDataAccounts: 'arangodb',
  slowQueriesDataHot: 'arangodb',
  slowQueriesDataCold: '',
  slowQueriesDataColdCache: '',
  dbServer: 'arangodb:8529',
  dbName: 'blockchain',
  dbAuth: '',
  dbMaxSockets: '100',
  slowDbServer: '',
  slowDbName: '',
  slowDbAuth: '',
  slowDbMaxSockets: '3',
  authEndpoint: '',
  mamAccessKeys: '',
  jaegerEndpoint: '',
  traceService: 'Q Server',
  traceTags: '',
  statsdServer: '',
  statsdTags: '',
  keepAlive: '60000'
};
exports.defaultOptions = defaultOptions;

function resolveOptions(options, env, defaults) {
  return {
    host: options.host || env.Q_SERVER_HOST || defaults.host,
    port: options.port || env.Q_SERVER_PORT || defaults.port,
    rpcPort: options.rpcPort || env.Q_SERVER_RPC_PORT || defaults.rpcPort,
    requestsMode: options.requestsMode || env.Q_REQUESTS_MODE || defaults.requestsMode,
    requestsServer: options.requestsServer || env.Q_REQUESTS_SERVER || defaults.requestsServer,
    requestsTopic: options.requestsTopic || env.Q_REQUESTS_TOPIC || defaults.requestsTopic,
    dbServer: options.dbServer || env.Q_DATABASE_SERVER || defaults.dbServer,
    dbName: options.dbName || env.Q_DATABASE_NAME || defaults.dbName,
    dbAuth: options.dbAuth || env.Q_DATABASE_AUTH || defaults.dbAuth,
    dbMaxSockets: options.dbMaxSockets || env.Q_DATABASE_MAX_SOCKETS || defaults.dbMaxSockets,
    slowDbServer: options.slowDbServer || env.Q_SLOW_DATABASE_SERVER || defaults.slowDbServer,
    slowDbName: options.slowDbName || env.Q_SLOW_DATABASE_NAME || defaults.slowDbName,
    slowDbAuth: options.slowDbAuth || env.Q_SLOW_DATABASE_AUTH || defaults.slowDbAuth,
    slowDbMaxSockets: options.slowDbMaxSockets || env.Q_SLOW_DATABASE_MAX_SOCKETS || defaults.slowDbMaxSockets,
    authEndpoint: options.authEndpoint || env.Q_AUTH_ENDPOINT || defaults.authEndpoint,
    mamAccessKeys: options.mamAccessKeys || env.Q_MAM_ACCESS_KEYS || defaults.mamAccessKeys,
    jaegerEndpoint: options.jaegerEndpoint || env.Q_JAEGER_ENDPOINT || defaults.jaegerEndpoint,
    traceService: options.traceService || env.Q_TRACE_SERVICE || defaults.traceService,
    traceTags: options.traceTags || env.Q_TRACE_TAGS || defaults.traceTags,
    statsdServer: options.statsdServer || env.Q_STATSD_SERVER || defaults.statsdServer,
    statsdTags: options.statsdTags || env.Q_STATSD_TAGS || defaults.statsdTags,
    keepAlive: options.keepAlive || env.Q_KEEP_ALIVE || defaults.keepAlive
  };
}

function createConfig(options, env, defaults) {
  const resolvedOptions = resolveOptions(options, env, defaults);
  return {
    server: {
      host: resolvedOptions.host,
      port: Number.parseInt(resolvedOptions.port),
      rpcPort: resolvedOptions.rpcPort,
      keepAlive: Number.parseInt(resolvedOptions.keepAlive)
    },
    requests: {
      mode: resolvedOptions.requestsMode,
      server: resolvedOptions.requestsServer,
      topic: resolvedOptions.requestsTopic
    },
    data: {
      server: resolvedOptions.dbServer,
      name: resolvedOptions.dbName,
      auth: resolvedOptions.dbAuth,
      maxSockets: Number(resolvedOptions.dbMaxSockets)
    },
    slowQueriesData: {
      server: resolvedOptions.slowDbServer || resolvedOptions.dbServer,
      name: resolvedOptions.slowDbName || resolvedOptions.dbName,
      auth: resolvedOptions.slowDbAuth || resolvedOptions.dbAuth,
      maxSockets: Number(resolvedOptions.slowDbMaxSockets)
    },
    listener: {
      restartTimeout: 1000
    },
    authorization: {
      endpoint: resolvedOptions.authEndpoint
    },
    jaeger: {
      endpoint: resolvedOptions.jaegerEndpoint,
      service: resolvedOptions.traceService,
      tags: parseTags(resolvedOptions.traceTags)
    },
    statsd: {
      server: resolvedOptions.statsdServer,
      tags: (resolvedOptions.statsdTags || '').split(',').map(x => x.trim()).filter(x => x)
    },
    mamAccessKeys: new Set((resolvedOptions.mamAccessKeys || '').split(','))
  };
}

function sortedIndex(fields) {
  return {
    type: 'persistent',
    fields
  };
}

const BLOCKCHAIN = {
  name: 'blockchain',
  collections: {
    blocks: {
      indexes: [sortedIndex(['seq_no', 'gen_utime']), sortedIndex(['gen_utime']), sortedIndex(['workchain_id', 'shard', 'seq_no']), sortedIndex(['workchain_id', 'shard', 'gen_utime']), sortedIndex(['workchain_id', 'seq_no']), sortedIndex(['workchain_id', 'gen_utime']), sortedIndex(['master.min_shard_gen_utime']), sortedIndex(['prev_ref.root_hash', '_key']), sortedIndex(['prev_alt_ref.root_hash', '_key'])]
    },
    accounts: {
      indexes: [sortedIndex(['last_trans_lt']), sortedIndex(['balance'])]
    },
    messages: {
      indexes: [sortedIndex(['block_id']), sortedIndex(['value', 'created_at']), sortedIndex(['src', 'value', 'created_at']), sortedIndex(['dst', 'value', 'created_at']), sortedIndex(['src', 'created_at']), sortedIndex(['dst', 'created_at']), sortedIndex(['created_lt']), sortedIndex(['created_at'])]
    },
    transactions: {
      indexes: [sortedIndex(['block_id']), sortedIndex(['in_msg']), sortedIndex(['out_msgs[*]']), sortedIndex(['account_addr', 'now']), sortedIndex(['now']), sortedIndex(['lt']), sortedIndex(['account_addr', 'orig_status', 'end_status']), sortedIndex(['now', 'account_addr', 'lt'])]
    },
    blocks_signatures: {
      indexes: [sortedIndex(['signatures[*].node_id', 'gen_utime'])]
    }
  }
};
const BLOCKCHAIN_DB = { ...BLOCKCHAIN,
  lastUpdateTime: 0
};
exports.BLOCKCHAIN_DB = BLOCKCHAIN_DB;
Object.entries(BLOCKCHAIN.collections).forEach(([name, collectionMixed]) => {
  const collection = collectionMixed;
  collection.name = name;
  collection.indexes.push({
    fields: ['_key']
  });
});
const STATS = {
  start: 'start',
  prefix: 'qserver.',
  doc: {
    count: 'doc.count'
  },
  post: {
    count: 'post.count',
    failed: 'post.failed'
  },
  query: {
    count: 'query.count',
    time: 'query.time',
    active: 'query.active',
    failed: 'query.failed',
    slow: 'query.slow'
  },
  subscription: {
    active: 'subscription.active'
  },
  waitFor: {
    active: 'waitfor.active'
  }
};
exports.STATS = STATS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2ZXIvY29uZmlnLmpzIl0sIm5hbWVzIjpbIlFSZXF1ZXN0c01vZGUiLCJrYWZrYSIsInJlc3QiLCJlbnN1cmVQcm90b2NvbCIsImFkZHJlc3MiLCJkZWZhdWx0UHJvdG9jb2wiLCJ0ZXN0IiwiZ2V0SXAiLCJpcHY0IiwiT2JqZWN0IiwidmFsdWVzIiwib3MiLCJuZXR3b3JrSW50ZXJmYWNlcyIsInJlZHVjZSIsImFjYyIsIngiLCJjb25jYXQiLCJmaW5kIiwiZmFtaWx5IiwiaW50ZXJuYWwiLCJwYXJzZVRhZ3MiLCJzIiwidGFncyIsInNwbGl0IiwiZm9yRWFjaCIsInQiLCJpIiwiaW5kZXhPZiIsInN1YnN0ciIsInBhcnNlRGJDb25maWciLCJjb25maWciLCJkZWZNYXhTb2NrZXRzIiwibG93ZXJDYXNlZCIsInRvTG93ZXJDYXNlIiwidHJpbSIsImhhc1Byb3RvY29sIiwic3RhcnRzV2l0aCIsInVybCIsIlVSTCIsInByb3RvY29sIiwiaG9zdCIsInBvcnQiLCJwYXRoIiwicGF0aG5hbWUiLCJzZXJ2ZXIiLCJhdXRoIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIm5hbWUiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJtYXhTb2NrZXRzIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJkZWZhdWx0T3B0aW9ucyIsInJwY1BvcnQiLCJyZXF1ZXN0c01vZGUiLCJyZXF1ZXN0c1NlcnZlciIsInJlcXVlc3RzVG9waWMiLCJkYXRhQWNjb3VudHMiLCJkYXRhSG90IiwiZGF0YUNvbGQiLCJkYXRhQ29sZENhY2hlIiwic2xvd1F1ZXJpZXNEYXRhQWNjb3VudHMiLCJzbG93UXVlcmllc0RhdGFIb3QiLCJzbG93UXVlcmllc0RhdGFDb2xkIiwic2xvd1F1ZXJpZXNEYXRhQ29sZENhY2hlIiwiZGJTZXJ2ZXIiLCJkYk5hbWUiLCJkYkF1dGgiLCJkYk1heFNvY2tldHMiLCJzbG93RGJTZXJ2ZXIiLCJzbG93RGJOYW1lIiwic2xvd0RiQXV0aCIsInNsb3dEYk1heFNvY2tldHMiLCJhdXRoRW5kcG9pbnQiLCJtYW1BY2Nlc3NLZXlzIiwiamFlZ2VyRW5kcG9pbnQiLCJ0cmFjZVNlcnZpY2UiLCJ0cmFjZVRhZ3MiLCJzdGF0c2RTZXJ2ZXIiLCJzdGF0c2RUYWdzIiwia2VlcEFsaXZlIiwicmVzb2x2ZU9wdGlvbnMiLCJvcHRpb25zIiwiZW52IiwiZGVmYXVsdHMiLCJRX1NFUlZFUl9IT1NUIiwiUV9TRVJWRVJfUE9SVCIsIlFfU0VSVkVSX1JQQ19QT1JUIiwiUV9SRVFVRVNUU19NT0RFIiwiUV9SRVFVRVNUU19TRVJWRVIiLCJRX1JFUVVFU1RTX1RPUElDIiwiUV9EQVRBQkFTRV9TRVJWRVIiLCJRX0RBVEFCQVNFX05BTUUiLCJRX0RBVEFCQVNFX0FVVEgiLCJRX0RBVEFCQVNFX01BWF9TT0NLRVRTIiwiUV9TTE9XX0RBVEFCQVNFX1NFUlZFUiIsIlFfU0xPV19EQVRBQkFTRV9OQU1FIiwiUV9TTE9XX0RBVEFCQVNFX0FVVEgiLCJRX1NMT1dfREFUQUJBU0VfTUFYX1NPQ0tFVFMiLCJRX0FVVEhfRU5EUE9JTlQiLCJRX01BTV9BQ0NFU1NfS0VZUyIsIlFfSkFFR0VSX0VORFBPSU5UIiwiUV9UUkFDRV9TRVJWSUNFIiwiUV9UUkFDRV9UQUdTIiwiUV9TVEFUU0RfU0VSVkVSIiwiUV9TVEFUU0RfVEFHUyIsIlFfS0VFUF9BTElWRSIsImNyZWF0ZUNvbmZpZyIsInJlc29sdmVkT3B0aW9ucyIsInJlcXVlc3RzIiwibW9kZSIsInRvcGljIiwiZGF0YSIsInNsb3dRdWVyaWVzRGF0YSIsImxpc3RlbmVyIiwicmVzdGFydFRpbWVvdXQiLCJhdXRob3JpemF0aW9uIiwiZW5kcG9pbnQiLCJqYWVnZXIiLCJzZXJ2aWNlIiwic3RhdHNkIiwibWFwIiwiZmlsdGVyIiwiU2V0Iiwic29ydGVkSW5kZXgiLCJmaWVsZHMiLCJ0eXBlIiwiQkxPQ0tDSEFJTiIsImNvbGxlY3Rpb25zIiwiYmxvY2tzIiwiaW5kZXhlcyIsImFjY291bnRzIiwibWVzc2FnZXMiLCJ0cmFuc2FjdGlvbnMiLCJibG9ja3Nfc2lnbmF0dXJlcyIsIkJMT0NLQ0hBSU5fREIiLCJsYXN0VXBkYXRlVGltZSIsImVudHJpZXMiLCJjb2xsZWN0aW9uTWl4ZWQiLCJjb2xsZWN0aW9uIiwicHVzaCIsIlNUQVRTIiwic3RhcnQiLCJwcmVmaXgiLCJkb2MiLCJjb3VudCIsInBvc3QiLCJmYWlsZWQiLCJxdWVyeSIsInRpbWUiLCJhY3RpdmUiLCJzbG93Iiwic3Vic2NyaXB0aW9uIiwid2FpdEZvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFrQkE7Ozs7QUFsQkE7Ozs7Ozs7Ozs7Ozs7OztBQXFCTyxNQUFNQSxhQUFhLEdBQUc7QUFDekJDLEVBQUFBLEtBQUssRUFBRSxPQURrQjtBQUV6QkMsRUFBQUEsSUFBSSxFQUFFO0FBRm1CLENBQXRCOzs7QUF3SEEsU0FBU0MsY0FBVCxDQUF3QkMsT0FBeEIsRUFBeUNDLGVBQXpDLEVBQTBFO0FBQzdFLFNBQU8sY0FBY0MsSUFBZCxDQUFtQkYsT0FBbkIsSUFBOEJBLE9BQTlCLEdBQXlDLEdBQUVDLGVBQWdCLE1BQUtELE9BQVEsRUFBL0U7QUFDSDs7QUFFRCxTQUFTRyxLQUFULEdBQXlCO0FBQ3JCLFFBQU1DLElBQUksR0FBSUMsTUFBTSxDQUFDQyxNQUFQLENBQWNDLFlBQUdDLGlCQUFILEVBQWQsQ0FBRCxDQUNSQyxNQURRLENBQ0QsQ0FBQ0MsR0FBRCxFQUFNQyxDQUFOLEtBQVlELEdBQUcsQ0FBQ0UsTUFBSixDQUFXRCxDQUFYLENBRFgsRUFDMEIsRUFEMUIsRUFFUkUsSUFGUSxDQUVIRixDQUFDLElBQUlBLENBQUMsQ0FBQ0csTUFBRixLQUFhLE1BQWIsSUFBdUIsQ0FBQ0gsQ0FBQyxDQUFDSSxRQUY1QixDQUFiO0FBR0EsU0FBT1gsSUFBSSxJQUFJQSxJQUFJLENBQUNKLE9BQXBCO0FBQ0g7O0FBRUQsU0FBU2dCLFNBQVQsQ0FBbUJDLENBQW5CLEVBQW9EO0FBQ2hELFFBQU1DLElBQTBCLEdBQUcsRUFBbkM7QUFDQUQsRUFBQUEsQ0FBQyxDQUFDRSxLQUFGLENBQVEs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RUFBRSxPQURVO0FBRWpCQyxFQUFBQSxNQUFNLEVBQUUsVUFGUztBQUdqQkMsRUFBQUEsR0FBRyxFQUFFO0FBQ0RDLElBQUFBLEtBQUssRUFBRTtBQUROLEdBSFk7QUFNakJDLEVBQUFBLElBQUksRUFBRTtBQUNGRCxJQUFBQSxLQUFLLEVBQUUsWUFETDtBQUVGRSxJQUFBQSxNQUFNLEVBQUU7QUFGTixHQU5XO0FBVWpCQyxFQUFBQSxLQUFLLEVBQUU7QUFDSEgsSUFBQUEsS0FBSyxFQUFFLGFBREo7QUFFSEksSUFBQUEsSUFBSSxFQUFFLFlBRkg7QUFHSEMsSUFBQUEsTUFBTSxFQUFFLGNBSEw7QUFJSEgsSUFBQUEsTUFBTSxFQUFFLGNBSkw7QUFLSEksSUFBQUEsSUFBSSxFQUFFO0FBTEgsR0FWVTtBQWlCakJDLEVBQUFBLFlBQVksRUFBRTtBQUNWRixJQUFBQSxNQUFNLEVBQUU7QUFERSxHQWpCRztBQW9CakJHLEVBQUFBLE9BQU8sRUFBRTtBQUNMSCxJQUFBQSxNQUFNLEVBQUU7QUFESDtBQXBCUSxDQUFkIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVE9OIERFViBTT0xVVElPTlMgTFRELlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBTT0ZUV0FSRSBFVkFMVUFUSU9OIExpY2Vuc2UgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxuICogdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXG4gKiBMaWNlbnNlIGF0OlxuICpcbiAqIGh0dHA6Ly93d3cudG9uLmRldi9saWNlbnNlc1xuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgVE9OIERFViBzb2Z0d2FyZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBAZmxvd1xuXG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuaW1wb3J0IHR5cGUgeyBRSW5kZXhJbmZvIH0gZnJvbSAnLi9kYXRhL2RhdGEtcHJvdmlkZXInO1xuXG5leHBvcnQgY29uc3QgUVJlcXVlc3RzTW9kZSA9IHtcbiAgICBrYWZrYTogJ2thZmthJyxcbiAgICByZXN0OiAncmVzdCcsXG59O1xuXG5leHBvcnQgdHlwZSBRQXJhbmdvQ29uZmlnID0ge1xuICAgIHNlcnZlcjogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhdXRoOiBzdHJpbmcsXG4gICAgbWF4U29ja2V0czogbnVtYmVyLFxuICAgIGxpc3RlbmVyUmVzdGFydFRpbWVvdXQ6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFFDb2xkQ2FjaGVDb25maWcgPSB7XG5cbn07XG5cbmV4cG9ydCB0eXBlIFFEYXRhQnJva2VyQ29uZmlnID0ge1xuICAgIG11dGFibGU6IFFBcmFuZ29Db25maWc7XG4gICAgaW1tdXRhYmxlSG90OiBRQXJhbmdvQ29uZmlnO1xuICAgIGltbXV0YWJsZUNvbGQ6IFFBcmFuZ29Db25maWdbXTtcbiAgICBpbW11dGFibGVDb2xkQ2FjaGU6IFFDb2xkQ2FjaGVDb25maWc7XG59O1xuXG5leHBvcnQgdHlwZSBRQ29uZmlnID0ge1xuICAgIHNlcnZlcjoge1xuICAgICAgICBob3N0OiBzdHJpbmcsXG4gICAgICAgIHBvcnQ6IG51bWJlcixcbiAgICAgICAgcnBjUG9ydDogc3RyaW5nLFxuICAgICAgICBrZWVwQWxpdmU6IG51bWJlcixcbiAgICB9LFxuICAgIHJlcXVlc3RzOiB7XG4gICAgICAgIG1vZGU6ICdrYWZrYScgfCAncmVzdCcsXG4gICAgICAgIHNlcnZlcjogc3RyaW5nLFxuICAgICAgICB0b3BpYzogc3RyaW5nLFxuICAgIH0sXG4gICAgZGF0YTogUURhdGFCcm9rZXJDb25maWcsXG4gICAgc2xvd1F1ZXJpZXNEYXRhOiBRRGF0YUJyb2tlckNvbmZpZyxcbiAgICBsaXN0ZW5lcjoge1xuICAgICAgICByZXN0YXJ0VGltZW91dDogbnVtYmVyXG4gICAgfSxcbiAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIGVuZHBvaW50OiBzdHJpbmcsXG4gICAgfSxcbiAgICBqYWVnZXI6IHtcbiAgICAgICAgZW5kcG9pbnQ6IHN0cmluZyxcbiAgICAgICAgc2VydmljZTogc3RyaW5nLFxuICAgICAgICB0YWdzOiB7IFtzdHJpbmddOiBzdHJpbmcgfVxuICAgIH0sXG4gICAgc3RhdHNkOiB7XG4gICAgICAgIHNlcnZlcjogc3RyaW5nLFxuICAgICAgICB0YWdzOiBzdHJpbmdbXSxcbiAgICB9LFxuICAgIG1hbUFjY2Vzc0tleXM6IFNldDxzdHJpbmc+LFxuICAgIGlzVGVzdHM/OiBib29sZWFuLFxufVxuXG5leHBvcnQgdHlwZSBQcm9ncmFtT3B0aW9ucyA9IHtcbiAgICByZXF1ZXN0c01vZGU6ICdrYWZrYScgfCAncmVzdCcsXG4gICAgcmVxdWVzdHNTZXJ2ZXI6IHN0cmluZyxcbiAgICByZXF1ZXN0c1RvcGljOiBzdHJpbmcsXG5cbiAgICBkYXRhQWNjb3VudHM6IHN0cmluZyxcbiAgICBkYXRhSG90OiBzdHJpbmcsXG4gICAgZGF0YUNvbGQ6IHN0cmluZyxcbiAgICBkYXRhQ29sZENhY2hlOiBzdHJpbmcsXG5cbiAgICBzbG93UXVlcmllc0RhdGFBY2NvdW50czogc3RyaW5nLFxuICAgIHNsb3dRdWVyaWVzRGF0YUhvdDogc3RyaW5nLFxuICAgIHNsb3dRdWVyaWVzRGF0YUNvbGQ6IHN0cmluZyxcbiAgICBzbG93UXVlcmllc0RhdGFDb2xkQ2FjaGU6IHN0cmluZyxcblxuICAgIGRiU2VydmVyOiBzdHJpbmcsXG4gICAgZGJOYW1lOiBzdHJpbmcsXG4gICAgZGJBdXRoOiBzdHJpbmcsXG4gICAgZGJNYXhTb2NrZXRzOiBzdHJpbmcsXG5cbiAgICBzbG93RGJTZXJ2ZXI6IHN0cmluZyxcbiAgICBzbG93RGJOYW1lOiBzdHJpbmcsXG4gICAgc2xvd0RiQXV0aDogc3RyaW5nLFxuICAgIHNsb3dEYk1heFNvY2tldHM6IHN0cmluZyxcblxuICAgIGhvc3Q6IHN0cmluZyxcbiAgICBwb3J0OiBzdHJpbmcsXG4gICAgcnBjUG9ydDogc3RyaW5nLFxuICAgIGphZWdlckVuZHBvaW50OiBzdHJpbmcsXG4gICAgdHJhY2VTZXJ2aWNlOiBzdHJpbmcsXG4gICAgdHJhY2VUYWdzOiBzdHJpbmcsXG4gICAgYXV0aEVuZHBvaW50OiBzdHJpbmcsXG4gICAgc3RhdHNkU2VydmVyOiBzdHJpbmcsXG4gICAgc3RhdHNkVGFnczogc3RyaW5nLFxuICAgIG1hbUFjY2Vzc0tleXM6IHN0cmluZyxcbiAgICBrZWVwQWxpdmU6IHN0cmluZyxcbn1cblxudHlwZSBQcm9ncmFtRW52ID0ge1xuICAgIFFfU0VSVkVSX0hPU1Q6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9TRVJWRVJfUE9SVDogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NFUlZFUl9SUENfUE9SVDogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1JFUVVFU1RTX01PREU6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9SRVFVRVNUU19TRVJWRVI6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9SRVFVRVNUU19UT1BJQzogc3RyaW5nIHwgdm9pZCxcbiAgICBRX0RBVEFCQVNFX1NFUlZFUjogc3RyaW5nIHwgdm9pZCxcbiAgICBRX0RBVEFCQVNFX05BTUU6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9EQVRBQkFTRV9BVVRIOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfREFUQUJBU0VfTUFYX1NPQ0tFVFM6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9TTE9XX0RBVEFCQVNFX1NFUlZFUjogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NMT1dfREFUQUJBU0VfTkFNRTogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NMT1dfREFUQUJBU0VfQVVUSDogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NMT1dfREFUQUJBU0VfTUFYX1NPQ0tFVFM6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9BVVRIX0VORFBPSU5UOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfTUFNX0FDQ0VTU19LRVlTOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfSkFFR0VSX0VORFBPSU5UOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfVFJBQ0VfU0VSVklDRTogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1RSQUNFX1RBR1M6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9TVEFUU0RfU0VSVkVSOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfU1RBVFNEX1RBR1M6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9LRUVQX0FMSVZFOiBzdHJpbmcgfCB2b2lkLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlUHJvdG9jb2woYWRkcmVzczogc3RyaW5nLCBkZWZhdWx0UHJvdG9jb2w6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIC9eXFx3KzpcXC9cXC8vZ2kudGVzdChhZGRyZXNzKSA/IGFkZHJlc3MgOiBgJHtkZWZhdWx0UHJvdG9jb2x9Oi8vJHthZGRyZXNzfWA7XG59XG5cbmZ1bmN0aW9uIGdldElwKCk6IHN0cmluZyB7XG4gICAgY29uc3QgaXB2NCA9IChPYmplY3QudmFsdWVzKG9zLm5ldHdvcmtJbnRlcmZhY2VzKCkpOiBhbnkpXG4gICAgICAgIC5yZWR1Y2UoKGFjYywgeCkgPT4gYWNjLmNvbmNhdCh4KSwgW10pXG4gICAgICAgIC5maW5kKHggPT4geC5mYW1pbHkgPT09ICdJUHY0JyAmJiAheC5pbnRlcm5hbCk7XG4gICAgcmV0dXJuIGlwdjQgJiYgaXB2NC5hZGRyZXNzO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRhZ3Moczogc3RyaW5nKTogeyBbc3RyaW5nXTogc3RyaW5nIH0ge1xuICAgIGNvbnN0IHRhZ3M6IHsgW3N0cmluZ106IHN0cmluZyB9ID0ge307XG4gICAgcy5zcGxpdCgnLCcpLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHQuaW5kZXhPZignPScpO1xuICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICB0YWdzW3Quc3Vic3RyKDAsIGkpXSA9IHQuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhZ3NbdF0gPSAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0YWdzO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURiQ29uZmlnKGNvbmZpZzogc3RyaW5nLCBkZWZNYXhTb2NrZXRzOiBudW1iZXIpOiBRQXJhbmdvQ29uZmlnIHtcbiAgICBjb25zdCBsb3dlckNhc2VkID0gY29uZmlnLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIGNvbnN0IGhhc1Byb3RvY29sID0gbG93ZXJDYXNlZC5zdGFydHNXaXRoKCdodHRwOicpIHx8IGxvd2VyQ2FzZWQuc3RhcnRzV2l0aCgnaHR0cHM6Jyk7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChoYXNQcm90b2NvbCA/IGNvbmZpZyA6IGBodHRwczovLyR7Y29uZmlnfWApO1xuICAgIGNvbnN0IHByb3RvY29sID0gdXJsLnByb3RvY29sIHx8ICdodHRwczonO1xuICAgIGNvbnN0IGhvc3QgPSB1cmwucG9ydCA/IHVybC5ob3N0IDogYCR7dXJsLmhvc3R9OjgwNTlgO1xuICAgIGNvbnN0IHBhdGggPSB1cmwucGF0aG5hbWUgIT09ICcvJyA/IHVybC5wYXRobmFtZSA6ICcnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZlcjogYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtwYXRofWAsXG4gICAgICAgIGF1dGg6IHVybC51c2VybmFtZSAmJiBgJHt1cmwudXNlcm5hbWV9OiR7dXJsLnBhc3N3b3JkfWAsXG4gICAgICAgIG5hbWU6IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCduYW1lJykgfHwgJ2Jsb2NrY2hhaW4nLFxuICAgICAgICBtYXhTb2NrZXRzOiBOdW1iZXIucGFyc2VJbnQodXJsLnNlYXJjaFBhcmFtcy5nZXQoJ21heFNvY2tldHMnKSB8fCBkZWZNYXhTb2NrZXRzKSxcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0T3B0aW9uczogUHJvZ3JhbU9wdGlvbnMgPSB7XG4gICAgaG9zdDogZ2V0SXAoKSxcbiAgICBwb3J0OiAnNDAwMCcsXG4gICAgcnBjUG9ydDogJycsXG4gICAgcmVxdWVzdHNNb2RlOiAna2Fma2EnLFxuICAgIHJlcXVlc3RzU2VydmVyOiAna2Fma2E6OTA5MicsXG4gICAgcmVxdWVzdHNUb3BpYzogJ3JlcXVlc3RzJyxcblxuICAgIGRhdGFBY2NvdW50czogJ2FyYW5nb2RiJyxcbiAgICBkYXRhSG90OiAnYXJhbmdvZGInLFxuICAgIGRhdGFDb2xkOiAnJyxcbiAgICBkYXRhQ29sZENhY2hlOiAnJyxcblxuICAgIHNsb3dRdWVyaWVzRGF0YUFjY291bnRzOiAnYXJhbmdvZGInLFxuICAgIHNsb3dRdWVyaWVzRGF0YUhvdDogJ2FyYW5nb2RiJyxcbiAgICBzbG93UXVlcmllc0RhdGFDb2xkOiAnJyxcbiAgICBzbG93UXVlcmllc0RhdGFDb2xkQ2FjaGU6ICcnLFxuXG4gICAgZGJTZXJ2ZXI6ICdhcmFuZ29kYjo4NTI5JyxcbiAgICBkYk5hbWU6ICdibG9ja2NoYWluJyxcbiAgICBkYkF1dGg6ICcnLFxuICAgIGRiTWF4U29ja2V0czogJzEwMCcsXG4gICAgc2xvd0RiU2VydmVyOiAnJyxcbiAgICBzbG93RGJOYW1lOiAnJyxcbiAgICBzbG93RGJBdXRoOiAnJyxcbiAgICBzbG93RGJNYXhTb2NrZXRzOiAnMycsXG5cbiAgICBhdXRoRW5kcG9pbnQ6ICcnLFxuICAgIG1hbUFjY2Vzc0tleXM6ICcnLFxuICAgIGphZWdlckVuZHBvaW50OiAnJyxcbiAgICB0cmFjZVNlcnZpY2U6ICdRIFNlcnZlcicsXG4gICAgdHJhY2VUYWdzOiAnJyxcbiAgICBzdGF0c2RTZXJ2ZXI6ICcnLFxuICAgIHN0YXRzZFRhZ3M6ICcnLFxuICAgIGtlZXBBbGl2ZTogJzYwMDAwJyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlT3B0aW9ucyhvcHRpb25zOiAkU2hhcGU8UHJvZ3JhbU9wdGlvbnM+LCBlbnY6IFByb2dyYW1FbnYsIGRlZmF1bHRzOiBQcm9ncmFtT3B0aW9ucyk6IFByb2dyYW1PcHRpb25zIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBob3N0OiBvcHRpb25zLmhvc3QgfHwgZW52LlFfU0VSVkVSX0hPU1QgfHwgZGVmYXVsdHMuaG9zdCxcbiAgICAgICAgcG9ydDogb3B0aW9ucy5wb3J0IHx8IGVudi5RX1NFUlZFUl9QT1JUIHx8IGRlZmF1bHRzLnBvcnQsXG4gICAgICAgIHJwY1BvcnQ6IG9wdGlvbnMucnBjUG9ydCB8fCBlbnYuUV9TRVJWRVJfUlBDX1BPUlQgfHwgZGVmYXVsdHMucnBjUG9ydCxcbiAgICAgICAgcmVxdWVzdHNNb2RlOiBvcHRpb25zLnJlcXVlc3RzTW9kZSB8fCAoZW52LlFfUkVRVUVTVFNfTU9ERTogYW55KSB8fCBkZWZhdWx0cy5yZXF1ZXN0c01vZGUsXG4gICAgICAgIHJlcXVlc3RzU2VydmVyOiBvcHRpb25zLnJlcXVlc3RzU2VydmVyIHx8IGVudi5RX1JFUVVFU1RTX1NFUlZFUiB8fCBkZWZhdWx0cy5yZXF1ZXN0c1NlcnZlcixcbiAgICAgICAgcmVxdWVzdHNUb3BpYzogb3B0aW9ucy5yZXF1ZXN0c1RvcGljIHx8IGVudi5RX1JFUVVFU1RTX1RPUElDIHx8IGRlZmF1bHRzLnJlcXVlc3RzVG9waWMsXG4gICAgICAgIGRiU2VydmVyOiBvcHRpb25zLmRiU2VydmVyIHx8IGVudi5RX0RBVEFCQVNFX1NFUlZFUiB8fCBkZWZhdWx0cy5kYlNlcnZlcixcbiAgICAgICAgZGJOYW1lOiBvcHRpb25zLmRiTmFtZSB8fCBlbnYuUV9EQVRBQkFTRV9OQU1FIHx8IGRlZmF1bHRzLmRiTmFtZSxcbiAgICAgICAgZGJBdXRoOiBvcHRpb25zLmRiQXV0aCB8fCBlbnYuUV9EQVRBQkFTRV9BVVRIIHx8IGRlZmF1bHRzLmRiQXV0aCxcbiAgICAgICAgZGJNYXhTb2NrZXRzOiBvcHRpb25zLmRiTWF4U29ja2V0cyB8fCBlbnYuUV9EQVRBQkFTRV9NQVhfU09DS0VUUyB8fCBkZWZhdWx0cy5kYk1heFNvY2tldHMsXG4gICAgICAgIHNsb3dEYlNlcnZlcjogb3B0aW9ucy5zbG93RGJTZXJ2ZXIgfHwgZW52LlFfU0xPV19EQVRBQkFTRV9TRVJWRVIgfHwgZGVmYXVsdHMuc2xvd0RiU2VydmVyLFxuICAgICAgICBzbG93RGJOYW1lOiBvcHRpb25zLnNsb3dEYk5hbWUgfHwgZW52LlFfU0xPV19EQVRBQkFTRV9OQU1FIHx8IGRlZmF1bHRzLnNsb3dEYk5hbWUsXG4gICAgICAgIHNsb3dEYkF1dGg6IG9wdGlvbnMuc2xvd0RiQXV0aCB8fCBlbnYuUV9TTE9XX0RBVEFCQVNFX0FVVEggfHwgZGVmYXVsdHMuc2xvd0RiQXV0aCxcbiAgICAgICAgc2xvd0RiTWF4U29ja2V0czogb3B0aW9ucy5zbG93RGJNYXhTb2NrZXRzIHx8IGVudi5RX1NMT1dfREFUQUJBU0VfTUFYX1NPQ0tFVFMgfHwgZGVmYXVsdHMuc2xvd0RiTWF4U29ja2V0cyxcbiAgICAgICAgYXV0aEVuZHBvaW50OiBvcHRpb25zLmF1dGhFbmRwb2ludCB8fCBlbnYuUV9BVVRIX0VORFBPSU5UIHx8IGRlZmF1bHRzLmF1dGhFbmRwb2ludCxcbiAgICAgICAgbWFtQWNjZXNzS2V5czogb3B0aW9ucy5tYW1BY2Nlc3NLZXlzIHx8IGVudi5RX01BTV9BQ0NFU1NfS0VZUyB8fCBkZWZhdWx0cy5tYW1BY2Nlc3NLZXlzLFxuICAgICAgICBqYWVnZXJFbmRwb2ludDogb3B0aW9ucy5qYWVnZXJFbmRwb2ludCB8fCBlbnYuUV9KQUVHRVJfRU5EUE9JTlQgfHwgZGVmYXVsdHMuamFlZ2VyRW5kcG9pbnQsXG4gICAgICAgIHRyYWNlU2VydmljZTogb3B0aW9ucy50cmFjZVNlcnZpY2UgfHwgZW52LlFfVFJBQ0VfU0VSVklDRSB8fCBkZWZhdWx0cy50cmFjZVNlcnZpY2UsXG4gICAgICAgIHRyYWNlVGFnczogb3B0aW9ucy50cmFjZVRhZ3MgfHwgZW52LlFfVFJBQ0VfVEFHUyB8fCBkZWZhdWx0cy50cmFjZVRhZ3MsXG4gICAgICAgIHN0YXRzZFNlcnZlcjogb3B0aW9ucy5zdGF0c2RTZXJ2ZXIgfHwgZW52LlFfU1RBVFNEX1NFUlZFUiB8fCBkZWZhdWx0cy5zdGF0c2RTZXJ2ZXIsXG4gICAgICAgIHN0YXRzZFRhZ3M6IG9wdGlvbnMuc3RhdHNkVGFncyB8fCBlbnYuUV9TVEFUU0RfVEFHUyB8fCBkZWZhdWx0cy5zdGF0c2RUYWdzLFxuICAgICAgICBrZWVwQWxpdmU6IG9wdGlvbnMua2VlcEFsaXZlIHx8IGVudi5RX0tFRVBfQUxJVkUgfHwgZGVmYXVsdHMua2VlcEFsaXZlLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb25maWcob3B0aW9uczogJFNoYXBlPFByb2dyYW1PcHRpb25zPiwgZW52OiBQcm9ncmFtRW52LCBkZWZhdWx0czogUHJvZ3JhbU9wdGlvbnMpOiBRQ29uZmlnIHtcbiAgICBjb25zdCByZXNvbHZlZE9wdGlvbnMgPSByZXNvbHZlT3B0aW9ucyhvcHRpb25zLCBlbnYsIGRlZmF1bHRzKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXJ2ZXI6IHtcbiAgICAgICAgICAgIGhvc3Q6IHJlc29sdmVkT3B0aW9ucy5ob3N0LFxuICAgICAgICAgICAgcG9ydDogTnVtYmVyLnBhcnNlSW50KHJlc29sdmVkT3B0aW9ucy5wb3J0KSxcbiAgICAgICAgICAgIHJwY1BvcnQ6IHJlc29sdmVkT3B0aW9ucy5ycGNQb3J0LFxuICAgICAgICAgICAga2VlcEFsaXZlOiBOdW1iZXIucGFyc2VJbnQocmVzb2x2ZWRPcHRpb25zLmtlZXBBbGl2ZSksXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVlc3RzOiB7XG4gICAgICAgICAgICBtb2RlOiByZXNvbHZlZE9wdGlvbnMucmVxdWVzdHNNb2RlLFxuICAgICAgICAgICAgc2VydmVyOiByZXNvbHZlZE9wdGlvbnMucmVxdWVzdHNTZXJ2ZXIsXG4gICAgICAgICAgICB0b3BpYzogcmVzb2x2ZWRPcHRpb25zLnJlcXVlc3RzVG9waWMsXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHNlcnZlcjogcmVzb2x2ZWRPcHRpb25zLmRiU2VydmVyLFxuICAgICAgICAgICAgbmFtZTogcmVzb2x2ZWRPcHRpb25zLmRiTmFtZSxcbiAgICAgICAgICAgIGF1dGg6IHJlc29sdmVkT3B0aW9ucy5kYkF1dGgsXG4gICAgICAgICAgICBtYXhTb2NrZXRzOiBOdW1iZXIocmVzb2x2ZWRPcHRpb25zLmRiTWF4U29ja2V0cyksXG4gICAgICAgIH0sXG4gICAgICAgIHNsb3dRdWVyaWVzRGF0YToge1xuICAgICAgICAgICAgc2VydmVyOiByZXNvbHZlZE9wdGlvbnMuc2xvd0RiU2VydmVyIHx8IHJlc29sdmVkT3B0aW9ucy5kYlNlcnZlcixcbiAgICAgICAgICAgIG5hbWU6IHJlc29sdmVkT3B0aW9ucy5zbG93RGJOYW1lIHx8IHJlc29sdmVkT3B0aW9ucy5kYk5hbWUsXG4gICAgICAgICAgICBhdXRoOiByZXNvbHZlZE9wdGlvbnMuc2xvd0RiQXV0aCB8fCByZXNvbHZlZE9wdGlvbnMuZGJBdXRoLFxuICAgICAgICAgICAgbWF4U29ja2V0czogTnVtYmVyKHJlc29sdmVkT3B0aW9ucy5zbG93RGJNYXhTb2NrZXRzKSxcbiAgICAgICAgfSxcbiAgICAgICAgbGlzdGVuZXI6IHtcbiAgICAgICAgICAgIHJlc3RhcnRUaW1lb3V0OiAxMDAwLFxuICAgICAgICB9LFxuICAgICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgICAgICBlbmRwb2ludDogcmVzb2x2ZWRPcHRpb25zLmF1dGhFbmRwb2ludCxcbiAgICAgICAgfSxcbiAgICAgICAgamFlZ2VyOiB7XG4gICAgICAgICAgICBlbmRwb2ludDogcmVzb2x2ZWRPcHRpb25zLmphZWdlckVuZHBvaW50LFxuICAgICAgICAgICAgc2VydmljZTogcmVzb2x2ZWRPcHRpb25zLnRyYWNlU2VydmljZSxcbiAgICAgICAgICAgIHRhZ3M6IHBhcnNlVGFncyhyZXNvbHZlZE9wdGlvbnMudHJhY2VUYWdzKSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdHNkOiB7XG4gICAgICAgICAgICBzZXJ2ZXI6IHJlc29sdmVkT3B0aW9ucy5zdGF0c2RTZXJ2ZXIsXG4gICAgICAgICAgICB0YWdzOiAocmVzb2x2ZWRPcHRpb25zLnN0YXRzZFRhZ3MgfHwgJycpLnNwbGl0KCcsJykubWFwKHggPT4geC50cmltKCkpLmZpbHRlcih4ID0+IHgpLFxuICAgICAgICB9LFxuICAgICAgICBtYW1BY2Nlc3NLZXlzOiBuZXcgU2V0KChyZXNvbHZlZE9wdGlvbnMubWFtQWNjZXNzS2V5cyB8fCAnJykuc3BsaXQoJywnKSksXG4gICAgfTtcbn1cblxuZXhwb3J0IHR5cGUgQ29sbGVjdGlvbkluZm8gPSB7XG4gICAgbmFtZT86IHN0cmluZyxcbiAgICBpbmRleGVzOiBRSW5kZXhJbmZvW10sXG59O1xuXG5leHBvcnQgdHlwZSBEYkluZm8gPSB7XG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGNvbGxlY3Rpb25zOiB7XG4gICAgICAgIFtzdHJpbmddOiBDb2xsZWN0aW9uSW5mbyxcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRlZEluZGV4KGZpZWxkczogc3RyaW5nW10pOiBRSW5kZXhJbmZvIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAncGVyc2lzdGVudCcsXG4gICAgICAgIGZpZWxkcyxcbiAgICB9O1xufVxuXG5jb25zdCBCTE9DS0NIQUlOOiB7XG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGNvbGxlY3Rpb25zOiB7XG4gICAgICAgIFtzdHJpbmddOiBDb2xsZWN0aW9uSW5mbyxcbiAgICB9XG59ID0ge1xuICAgIG5hbWU6ICdibG9ja2NoYWluJyxcbiAgICBjb2xsZWN0aW9uczoge1xuICAgICAgICBibG9ja3M6IHtcbiAgICAgICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3NlcV9ubycsICdnZW5fdXRpbWUnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydnZW5fdXRpbWUnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnc2hhcmQnLCAnc2VxX25vJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnd29ya2NoYWluX2lkJywgJ3NoYXJkJywgJ2dlbl91dGltZSddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3dvcmtjaGFpbl9pZCcsICdzZXFfbm8nXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnbWFzdGVyLm1pbl9zaGFyZF9nZW5fdXRpbWUnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydwcmV2X3JlZi5yb290X2hhc2gnLCAnX2tleSddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3ByZXZfYWx0X3JlZi5yb290X2hhc2gnLCAnX2tleSddKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydsYXN0X3RyYW5zX2x0J10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYmFsYW5jZSddKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydibG9ja19pZCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3ZhbHVlJywgJ2NyZWF0ZWRfYXQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydzcmMnLCAndmFsdWUnLCAnY3JlYXRlZF9hdCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2RzdCcsICd2YWx1ZScsICdjcmVhdGVkX2F0J10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnc3JjJywgJ2NyZWF0ZWRfYXQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydkc3QnLCAnY3JlYXRlZF9hdCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2NyZWF0ZWRfbHQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydjcmVhdGVkX2F0J10pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNhY3Rpb25zOiB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydibG9ja19pZCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2luX21zZyddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ291dF9tc2dzWypdJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYWNjb3VudF9hZGRyJywgJ25vdyddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ25vdyddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2x0J10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYWNjb3VudF9hZGRyJywgJ29yaWdfc3RhdHVzJywgJ2VuZF9zdGF0dXMnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydub3cnLCAnYWNjb3VudF9hZGRyJywgJ2x0J10pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgYmxvY2tzX3NpZ25hdHVyZXM6IHtcbiAgICAgICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3NpZ25hdHVyZXNbKl0ubm9kZV9pZCcsICdnZW5fdXRpbWUnXSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuXG5leHBvcnQgY29uc3QgQkxPQ0tDSEFJTl9EQjogRGJJbmZvID0ge1xuICAgIC4uLkJMT0NLQ0hBSU4sXG4gICAgbGFzdFVwZGF0ZVRpbWU6IDAsXG59O1xuXG5PYmplY3QuZW50cmllcyhCTE9DS0NIQUlOLmNvbGxlY3Rpb25zKS5mb3JFYWNoKChbbmFtZSwgY29sbGVjdGlvbk1peGVkXSkgPT4ge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSAoKGNvbGxlY3Rpb25NaXhlZDogYW55KTogQ29sbGVjdGlvbkluZm8pO1xuICAgIGNvbGxlY3Rpb24ubmFtZSA9IG5hbWU7XG4gICAgY29sbGVjdGlvbi5pbmRleGVzLnB1c2goeyBmaWVsZHM6IFsnX2tleSddIH0pO1xufSk7XG5cbmV4cG9ydCBjb25zdCBTVEFUUyA9IHtcbiAgICBzdGFydDogJ3N0YXJ0JyxcbiAgICBwcmVmaXg6ICdxc2VydmVyLicsXG4gICAgZG9jOiB7XG4gICAgICAgIGNvdW50OiAnZG9jLmNvdW50JyxcbiAgICB9LFxuICAgIHBvc3Q6IHtcbiAgICAgICAgY291bnQ6ICdwb3N0LmNvdW50JyxcbiAgICAgICAgZmFpbGVkOiAncG9zdC5mYWlsZWQnLFxuICAgIH0sXG4gICAgcXVlcnk6IHtcbiAgICAgICAgY291bnQ6ICdxdWVyeS5jb3VudCcsXG4gICAgICAgIHRpbWU6ICdxdWVyeS50aW1lJyxcbiAgICAgICAgYWN0aXZlOiAncXVlcnkuYWN0aXZlJyxcbiAgICAgICAgZmFpbGVkOiAncXVlcnkuZmFpbGVkJyxcbiAgICAgICAgc2xvdzogJ3F1ZXJ5LnNsb3cnLFxuICAgIH0sXG4gICAgc3Vic2NyaXB0aW9uOiB7XG4gICAgICAgIGFjdGl2ZTogJ3N1YnNjcmlwdGlvbi5hY3RpdmUnLFxuICAgIH0sXG4gICAgd2FpdEZvcjoge1xuICAgICAgICBhY3RpdmU6ICd3YWl0Zm9yLmFjdGl2ZScsXG4gICAgfSxcbn07XG5cbiJdfQ==