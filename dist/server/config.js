"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureProtocol = ensureProtocol;
exports.parseDbConfig = parseDbConfig;
exports.resolveOptions = resolveOptions;
exports.createConfig = createConfig;
exports.STATS = exports.BLOCKCHAIN_DB = exports.defaultOptions = exports.QRequestsMode = void 0;

var _os = _interopRequireDefault(require("os"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Copyright 2018-2020 TON DEV SOLUTIONS LTD.
 *
 * Licensed under the SOFTWARE EVALUATION License (the "License"); you may not use
 * this file except in compliance with the License.  You may obtain a copy of the
 * License at:
 *
 * http://www.ton.dev/licenses
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific TON DEV software governing permissions and
 * limitations under the License.
 */
const QRequestsMode = {
  kafka: 'kafka',
  rest: 'rest'
};
exports.QRequestsMode = QRequestsMode;

function ensureProtocol(address, defaultProtocol) {
  return /^\w+:\/\//gi.test(address) ? address : `${defaultProtocol}://${address}`;
}

function getIp() {
  const ipv4 = Object.values(_os.default.networkInterfaces()).reduce((acc, x) => acc.concat(x), []).find(x => x.family === 'IPv4' && !x.internal);
  return ipv4 && ipv4.address;
}

function parseTags(s) {
  const tags = {};
  s.split(',').forEach(t => {
    const i = t.indexOf('=');

    if (i >= 0) {
      tags[t.substr(0, i)] = t.substr(i + 1);
    } else {
      tags[t] = '';
    }
  });
  return tags;
}

function parseDbConfig(config, defMaxSockets) {
  const lowerCased = config.toLowerCase().trim();
  const hasProtocol = lowerCased.startsWith('http:') || lowerCased.startsWith('https:');
  const url = new URL(hasProtocol ? config : `https://${config}`);
  const protocol = url.protocol || 'https:';
  const host = url.port ? url.host : `${url.host}:8059`;
  const path = url.pathname !== '/' ? url.pathname : '';
  return {
    server: `${protocol}//${host}${path}`,
    auth: url.username && `${url.username}:${url.password}`,
    name: url.searchParams.get('name') || 'blockchain',
    maxSockets: Number.parseInt(url.searchParams.get('maxSockets') || defMaxSockets)
  };
}

const defaultOptions = {
  host: getIp(),
  port: '4000',
  rpcPort: '',
  requestsMode: 'kafka',
  requestsServer: 'kafka:9092',
  requestsTopic: 'requests',
  dataAccounts: 'arangodb',
  dataHot: 'arangodb',
  dataCold: '',
  dataColdCache: '',
  slowQueriesDataAccounts: 'arangodb',
  slowQueriesDataHot: 'arangodb',
  slowQueriesDataCold: '',
  slowQueriesDataColdCache: '',
  dbServer: 'arangodb:8529',
  dbName: 'blockchain',
  dbAuth: '',
  dbMaxSockets: '100',
  slowDbServer: '',
  slowDbName: '',
  slowDbAuth: '',
  slowDbMaxSockets: '3',
  authEndpoint: '',
  mamAccessKeys: '',
  jaegerEndpoint: '',
  traceService: 'Q Server',
  traceTags: '',
  statsdServer: '',
  statsdTags: '',
  keepAlive: '60000'
};
exports.defaultOptions = defaultOptions;

function resolveOptions(options, env, defaults) {
  return {
    host: options.host || env.Q_SERVER_HOST || defaults.host,
    port: options.port || env.Q_SERVER_PORT || defaults.port,
    rpcPort: options.rpcPort || env.Q_SERVER_RPC_PORT || defaults.rpcPort,
    requestsMode: options.requestsMode || env.Q_REQUESTS_MODE || defaults.requestsMode,
    requestsServer: options.requestsServer || env.Q_REQUESTS_SERVER || defaults.requestsServer,
    requestsTopic: options.requestsTopic || env.Q_REQUESTS_TOPIC || defaults.requestsTopic,
    dbServer: options.dbServer || env.Q_DATABASE_SERVER || defaults.dbServer,
    dbName: options.dbName || env.Q_DATABASE_NAME || defaults.dbName,
    dbAuth: options.dbAuth || env.Q_DATABASE_AUTH || defaults.dbAuth,
    dbMaxSockets: options.dbMaxSockets || env.Q_DATABASE_MAX_SOCKETS || defaults.dbMaxSockets,
    slowDbServer: options.slowDbServer || env.Q_SLOW_DATABASE_SERVER || defaults.slowDbServer,
    slowDbName: options.slowDbName || env.Q_SLOW_DATABASE_NAME || defaults.slowDbName,
    slowDbAuth: options.slowDbAuth || env.Q_SLOW_DATABASE_AUTH || defaults.slowDbAuth,
    slowDbMaxSockets: options.slowDbMaxSockets || env.Q_SLOW_DATABASE_MAX_SOCKETS || defaults.slowDbMaxSockets,
    authEndpoint: options.authEndpoint || env.Q_AUTH_ENDPOINT || defaults.authEndpoint,
    mamAccessKeys: options.mamAccessKeys || env.Q_MAM_ACCESS_KEYS || defaults.mamAccessKeys,
    jaegerEndpoint: options.jaegerEndpoint || env.Q_JAEGER_ENDPOINT || defaults.jaegerEndpoint,
    traceService: options.traceService || env.Q_TRACE_SERVICE || defaults.traceService,
    traceTags: options.traceTags || env.Q_TRACE_TAGS || defaults.traceTags,
    statsdServer: options.statsdServer || env.Q_STATSD_SERVER || defaults.statsdServer,
    statsdTags: options.statsdTags || env.Q_STATSD_TAGS || defaults.statsdTags,
    keepAlive: options.keepAlive || env.Q_KEEP_ALIVE || defaults.keepAlive
  };
}

function createConfig(options, env, defaults) {
  const resolvedOptions = resolveOptions(options, env, defaults);
  return {
    server: {
      host: resolvedOptions.host,
      port: Number.parseInt(resolvedOptions.port),
      rpcPort: resolvedOptions.rpcPort,
      keepAlive: Number.parseInt(resolvedOptions.keepAlive)
    },
    requests: {
      mode: resolvedOptions.requestsMode,
      server: resolvedOptions.requestsServer,
      topic: resolvedOptions.requestsTopic
    },
    database: {
      server: resolvedOptions.dbServer,
      name: resolvedOptions.dbName,
      auth: resolvedOptions.dbAuth,
      maxSockets: Number(resolvedOptions.dbMaxSockets)
    },
    slowDatabase: {
      server: resolvedOptions.slowDbServer || resolvedOptions.dbServer,
      name: resolvedOptions.slowDbName || resolvedOptions.dbName,
      auth: resolvedOptions.slowDbAuth || resolvedOptions.dbAuth,
      maxSockets: Number(resolvedOptions.slowDbMaxSockets)
    },
    listener: {
      restartTimeout: 1000
    },
    authorization: {
      endpoint: resolvedOptions.authEndpoint
    },
    jaeger: {
      endpoint: resolvedOptions.jaegerEndpoint,
      service: resolvedOptions.traceService,
      tags: parseTags(resolvedOptions.traceTags)
    },
    statsd: {
      server: resolvedOptions.statsdServer,
      tags: (resolvedOptions.statsdTags || '').split(',').map(x => x.trim()).filter(x => x)
    },
    mamAccessKeys: new Set((resolvedOptions.mamAccessKeys || '').split(','))
  };
}

function sortedIndex(fields) {
  return {
    type: 'persistent',
    fields
  };
}

const BLOCKCHAIN = {
  name: 'blockchain',
  collections: {
    blocks: {
      indexes: [sortedIndex(['seq_no', 'gen_utime']), sortedIndex(['gen_utime']), sortedIndex(['workchain_id', 'shard', 'seq_no']), sortedIndex(['workchain_id', 'shard', 'gen_utime']), sortedIndex(['workchain_id', 'seq_no']), sortedIndex(['workchain_id', 'gen_utime']), sortedIndex(['master.min_shard_gen_utime']), sortedIndex(['prev_ref.root_hash', '_key']), sortedIndex(['prev_alt_ref.root_hash', '_key'])]
    },
    accounts: {
      indexes: [sortedIndex(['last_trans_lt']), sortedIndex(['balance'])]
    },
    messages: {
      indexes: [sortedIndex(['block_id']), sortedIndex(['value', 'created_at']), sortedIndex(['src', 'value', 'created_at']), sortedIndex(['dst', 'value', 'created_at']), sortedIndex(['src', 'created_at']), sortedIndex(['dst', 'created_at']), sortedIndex(['created_lt']), sortedIndex(['created_at'])]
    },
    transactions: {
      indexes: [sortedIndex(['block_id']), sortedIndex(['in_msg']), sortedIndex(['out_msgs[*]']), sortedIndex(['account_addr', 'now']), sortedIndex(['now']), sortedIndex(['lt']), sortedIndex(['account_addr', 'orig_status', 'end_status']), sortedIndex(['now', 'account_addr', 'lt'])]
    },
    blocks_signatures: {
      indexes: [sortedIndex(['signatures[*].node_id', 'gen_utime'])]
    }
  }
};
const BLOCKCHAIN_DB = { ...BLOCKCHAIN,
  lastUpdateTime: 0
};
exports.BLOCKCHAIN_DB = BLOCKCHAIN_DB;
Object.entries(BLOCKCHAIN.collections).forEach(([name, collectionMixed]) => {
  const collection = collectionMixed;
  collection.name = name;
  collection.indexes.push({
    fields: ['_key']
  });
});
const STATS = {
  start: 'start',
  prefix: 'qserver.',
  doc: {
    count: 'doc.count'
  },
  post: {
    count: 'post.count',
    failed: 'post.failed'
  },
  query: {
    count: 'query.count',
    time: 'query.time',
    active: 'query.active',
    failed: 'query.failed',
    slow: 'query.slow'
  },
  subscription: {
    active: 'subscription.active'
  },
  waitFor: {
    active: 'waitfor.active'
  }
};
exports.STATS = STATS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9jb25maWcuanMiXSwibmFtZXMiOlsiUVJlcXVlc3RzTW9kZSIsImthZmthIiwicmVzdCIsImVuc3VyZVByb3RvY29sIiwiYWRkcmVzcyIsImRlZmF1bHRQcm90b2NvbCIsInRlc3QiLCJnZXRJcCIsImlwdjQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJvcyIsIm5ldHdvcmtJbnRlcmZhY2VzIiwicmVkdWNlIiwiYWNjIiwieCIsImNvbmNhdCIsImZpbmQiLCJmYW1pbHkiLCJpbnRlcm5hbCIsInBhcnNlVGFncyIsInMiLCJ0YWdzIiwic3BsaXQiLCJmb3JFYWNoIiwidCIsImkiLCJpbmRleE9mIiwic3Vic3RyIiwicGFyc2VEYkNvbmZpZyIsImNvbmZpZyIsImRlZk1heFNvY2tldHMiLCJsb3dlckNhc2VkIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiaGFzUHJvdG9jb2wiLCJzdGFydHNXaXRoIiwidXJsIiwiVVJMIiwicHJvdG9jb2wiLCJob3N0IiwicG9ydCIsInBhdGgiLCJwYXRobmFtZSIsInNlcnZlciIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibmFtZSIsInNlYXJjaFBhcmFtcyIsImdldCIsIm1heFNvY2tldHMiLCJOdW1iZXIiLCJwYXJzZUludCIsImRlZmF1bHRPcHRpb25zIiwicnBjUG9ydCIsInJlcXVlc3RzTW9kZSIsInJlcXVlc3RzU2VydmVyIiwicmVxdWVzdHNUb3BpYyIsImRhdGFBY2NvdW50cyIsImRhdGFIb3QiLCJkYXRhQ29sZCIsImRhdGFDb2xkQ2FjaGUiLCJzbG93UXVlcmllc0RhdGFBY2NvdW50cyIsInNsb3dRdWVyaWVzRGF0YUhvdCIsInNsb3dRdWVyaWVzRGF0YUNvbGQiLCJzbG93UXVlcmllc0RhdGFDb2xkQ2FjaGUiLCJkYlNlcnZlciIsImRiTmFtZSIsImRiQXV0aCIsImRiTWF4U29ja2V0cyIsInNsb3dEYlNlcnZlciIsInNsb3dEYk5hbWUiLCJzbG93RGJBdXRoIiwic2xvd0RiTWF4U29ja2V0cyIsImF1dGhFbmRwb2ludCIsIm1hbUFjY2Vzc0tleXMiLCJqYWVnZXJFbmRwb2ludCIsInRyYWNlU2VydmljZSIsInRyYWNlVGFncyIsInN0YXRzZFNlcnZlciIsInN0YXRzZFRhZ3MiLCJrZWVwQWxpdmUiLCJyZXNvbHZlT3B0aW9ucyIsIm9wdGlvbnMiLCJlbnYiLCJkZWZhdWx0cyIsIlFfU0VSVkVSX0hPU1QiLCJRX1NFUlZFUl9QT1JUIiwiUV9TRVJWRVJfUlBDX1BPUlQiLCJRX1JFUVVFU1RTX01PREUiLCJRX1JFUVVFU1RTX1NFUlZFUiIsIlFfUkVRVUVTVFNfVE9QSUMiLCJRX0RBVEFCQVNFX1NFUlZFUiIsIlFfREFUQUJBU0VfTkFNRSIsIlFfREFUQUJBU0VfQVVUSCIsIlFfREFUQUJBU0VfTUFYX1NPQ0tFVFMiLCJRX1NMT1dfREFUQUJBU0VfU0VSVkVSIiwiUV9TTE9XX0RBVEFCQVNFX05BTUUiLCJRX1NMT1dfREFUQUJBU0VfQVVUSCIsIlFfU0xPV19EQVRBQkFTRV9NQVhfU09DS0VUUyIsIlFfQVVUSF9FTkRQT0lOVCIsIlFfTUFNX0FDQ0VTU19LRVlTIiwiUV9KQUVHRVJfRU5EUE9JTlQiLCJRX1RSQUNFX1NFUlZJQ0UiLCJRX1RSQUNFX1RBR1MiLCJRX1NUQVRTRF9TRVJWRVIiLCJRX1NUQVRTRF9UQUdTIiwiUV9LRUVQX0FMSVZFIiwiY3JlYXRlQ29uZmlnIiwicmVzb2x2ZWRPcHRpb25zIiwicmVxdWVzdHMiLCJtb2RlIiwidG9waWMiLCJkYXRhYmFzZSIsInNsb3dEYXRhYmFzZSIsImxpc3RlbmVyIiwicmVzdGFydFRpbWVvdXQiLCJhdXRob3JpemF0aW9uIiwiZW5kcG9pbnQiLCJqYWVnZXIiLCJzZXJ2aWNlIiwic3RhdHNkIiwibWFwIiwiZmlsdGVyIiwiU2V0Iiwic29ydGVkSW5kZXgiLCJmaWVsZHMiLCJ0eXBlIiwiQkxPQ0tDSEFJTiIsImNvbGxlY3Rpb25zIiwiYmxvY2tzIiwiaW5kZXhlcyIsImFjY291bnRzIiwibWVzc2FnZXMiLCJ0cmFuc2FjdGlvbnMiLCJibG9ja3Nfc2lnbmF0dXJlcyIsIkJMT0NLQ0hBSU5fREIiLCJsYXN0VXBkYXRlVGltZSIsImVudHJpZXMiLCJjb2xsZWN0aW9uTWl4ZWQiLCJjb2xsZWN0aW9uIiwicHVzaCIsIlNUQVRTIiwic3RhcnQiLCJwcmVmaXgiLCJkb2MiLCJjb3VudCIsInBvc3QiLCJmYWlsZWQiLCJxdWVyeSIsInRpbWUiLCJhY3RpdmUiLCJzbG93Iiwic3Vic2NyaXB0aW9uIiwid2FpdEZvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFrQkE7Ozs7QUFsQkE7Ozs7Ozs7Ozs7Ozs7OztBQW9CTyxNQUFNQSxhQUFhLEdBQUc7QUFDekJDLEVBQUFBLEtBQUssRUFBRSxPQURrQjtBQUV6QkMsRUFBQUEsSUFBSSxFQUFFO0FBRm1CLENBQXRCOzs7QUFzSEEsU0FBU0MsY0FBVCxDQUF3QkMsT0FBeEIsRUFBeUNDLGVBQXpDLEVBQTBFO0FBQzdFLFNBQU8sY0FBY0MsSUFBZCxDQUFtQkYsT0FBbkIsSUFBOEJBLE9BQTlCLEdBQXlDLEdBQUVDLGVBQWdCLE1BQUtELE9BQVEsRUFBL0U7QUFDSDs7QUFFRCxTQUFTRyxLQUFULEdBQXlCO0FBQ3JCLFFBQU1DLElBQUksR0FBSUMsTUFBTSxDQUFDQyxNQUFQLENBQWNDLFlBQUdDLGlCQUFILEVBQWQsQ0FBRCxDQUNSQyxNQURRLENBQ0QsQ0FBQ0MsR0FBRCxFQUFNQyxDQUFOLEtBQVlELEdBQUcsQ0FBQ0UsTUFBSixDQUFXRCxDQUFYLENBRFgsRUFDMEIsRUFEMUIsRUFFUkUsSUFGUSxDQUVIRixDQUFDLElBQUlBLENBQUMsQ0FBQ0csTUFBRixLQUFhLE1BQWIsSUFBdUIsQ0FBQ0gsQ0FBQyxDQUFDSSxRQUY1QixDQUFiO0FBR0EsU0FBT1gsSUFBSSxJQUFJQSxJQUFJLENBQUNKLE9BQXBCO0FBQ0g7O0FBRUQsU0FBU2dCLFNBQVQsQ0FBbUJDLENBQW5CLEVBQW9EO0FBQ2hELFFBQU1DLElBQTBCLEdBQUcsRUFBbkM7QUFDQUQsRUFBQUEsQ0FBQyxDQUFDRSxLQUFGLENBQVEsR0FB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RSxPQURVO0FBRWpCQyxFQUFBQSxNQUFNLEVBQUUsVUFGUztBQUdqQkMsRUFBQUEsR0FBRyxFQUFFO0FBQ0RDLElBQUFBLEtBQUssRUFBRTtBQUROLEdBSFk7QUFNakJDLEVBQUFBLElBQUksRUFBRTtBQUNGRCxJQUFBQSxLQUFLLEVBQUUsWUFETDtBQUVGRSxJQUFBQSxNQUFNLEVBQUU7QUFGTixHQU5XO0FBVWpCQyxFQUFBQSxLQUFLLEVBQUU7QUFDSEgsSUFBQUEsS0FBSyxFQUFFLGFBREo7QUFFSEksSUFBQUEsSUFBSSxFQUFFLFlBRkg7QUFHSEMsSUFBQUEsTUFBTSxFQUFFLGNBSEw7QUFJSEgsSUFBQUEsTUFBTSxFQUFFLGNBSkw7QUFLSEksSUFBQUEsSUFBSSxFQUFFO0FBTEgsR0FWVTtBQWlCakJDLEVBQUFBLFlBQVksRUFBRTtBQUNWRixJQUFBQSxNQUFNLEVBQUU7QUFERSxHQWpCRztBQW9CakJHLEVBQUFBLE9BQU8sRUFBRTtBQUNMSCxJQUFBQSxNQUFNLEVBQUU7QUFESDtBQXBCUSxDQUFkIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVE9OIERFViBTT0xVVElPTlMgTFRELlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBTT0ZUV0FSRSBFVkFMVUFUSU9OIExpY2Vuc2UgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxuICogdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXG4gKiBMaWNlbnNlIGF0OlxuICpcbiAqIGh0dHA6Ly93d3cudG9uLmRldi9saWNlbnNlc1xuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgVE9OIERFViBzb2Z0d2FyZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBAZmxvd1xuXG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuXG5leHBvcnQgY29uc3QgUVJlcXVlc3RzTW9kZSA9IHtcbiAgICBrYWZrYTogJ2thZmthJyxcbiAgICByZXN0OiAncmVzdCcsXG59O1xuXG5leHBvcnQgdHlwZSBRRGJDb25maWcgPSB7XG4gICAgc2VydmVyOiBzdHJpbmcsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGF1dGg6IHN0cmluZyxcbiAgICBtYXhTb2NrZXRzOiBudW1iZXIsXG59O1xuXG5leHBvcnQgdHlwZSBRQ29sZENhY2hlQ29uZmlnID0ge1xuXG59O1xuXG5leHBvcnQgdHlwZSBRRGF0YUNvbmZpZyA9IHtcbiAgICBjb2xkOiBRRGJDb25maWdbXTtcbiAgICBob3Q6IFFEYkNvbmZpZztcbiAgICBjb2xkQ2FjaGU6IFFDb2xkQ2FjaGVDb25maWc7XG59O1xuXG5leHBvcnQgdHlwZSBRQ29uZmlnID0ge1xuICAgIHNlcnZlcjoge1xuICAgICAgICBob3N0OiBzdHJpbmcsXG4gICAgICAgIHBvcnQ6IG51bWJlcixcbiAgICAgICAgcnBjUG9ydDogc3RyaW5nLFxuICAgICAgICBrZWVwQWxpdmU6IG51bWJlcixcbiAgICB9LFxuICAgIHJlcXVlc3RzOiB7XG4gICAgICAgIG1vZGU6ICdrYWZrYScgfCAncmVzdCcsXG4gICAgICAgIHNlcnZlcjogc3RyaW5nLFxuICAgICAgICB0b3BpYzogc3RyaW5nLFxuICAgIH0sXG4gICAgZGF0YWJhc2U6IFFEYkNvbmZpZyxcbiAgICBzbG93RGF0YWJhc2U6IFFEYkNvbmZpZyxcbiAgICBsaXN0ZW5lcjoge1xuICAgICAgICByZXN0YXJ0VGltZW91dDogbnVtYmVyXG4gICAgfSxcbiAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIGVuZHBvaW50OiBzdHJpbmcsXG4gICAgfSxcbiAgICBqYWVnZXI6IHtcbiAgICAgICAgZW5kcG9pbnQ6IHN0cmluZyxcbiAgICAgICAgc2VydmljZTogc3RyaW5nLFxuICAgICAgICB0YWdzOiB7IFtzdHJpbmddOiBzdHJpbmcgfVxuICAgIH0sXG4gICAgc3RhdHNkOiB7XG4gICAgICAgIHNlcnZlcjogc3RyaW5nLFxuICAgICAgICB0YWdzOiBzdHJpbmdbXSxcbiAgICB9LFxuICAgIG1hbUFjY2Vzc0tleXM6IFNldDxzdHJpbmc+LFxuICAgIGlzVGVzdHM/OiBib29sZWFuLFxufVxuXG5leHBvcnQgdHlwZSBQcm9ncmFtT3B0aW9ucyA9IHtcbiAgICByZXF1ZXN0c01vZGU6ICdrYWZrYScgfCAncmVzdCcsXG4gICAgcmVxdWVzdHNTZXJ2ZXI6IHN0cmluZyxcbiAgICByZXF1ZXN0c1RvcGljOiBzdHJpbmcsXG5cbiAgICBkYXRhQWNjb3VudHM6IHN0cmluZyxcbiAgICBkYXRhSG90OiBzdHJpbmcsXG4gICAgZGF0YUNvbGQ6IHN0cmluZyxcbiAgICBkYXRhQ29sZENhY2hlOiBzdHJpbmcsXG5cbiAgICBzbG93UXVlcmllc0RhdGFBY2NvdW50czogc3RyaW5nLFxuICAgIHNsb3dRdWVyaWVzRGF0YUhvdDogc3RyaW5nLFxuICAgIHNsb3dRdWVyaWVzRGF0YUNvbGQ6IHN0cmluZyxcbiAgICBzbG93UXVlcmllc0RhdGFDb2xkQ2FjaGU6IHN0cmluZyxcblxuICAgIGRiU2VydmVyOiBzdHJpbmcsXG4gICAgZGJOYW1lOiBzdHJpbmcsXG4gICAgZGJBdXRoOiBzdHJpbmcsXG4gICAgZGJNYXhTb2NrZXRzOiBzdHJpbmcsXG5cbiAgICBzbG93RGJTZXJ2ZXI6IHN0cmluZyxcbiAgICBzbG93RGJOYW1lOiBzdHJpbmcsXG4gICAgc2xvd0RiQXV0aDogc3RyaW5nLFxuICAgIHNsb3dEYk1heFNvY2tldHM6IHN0cmluZyxcblxuICAgIGhvc3Q6IHN0cmluZyxcbiAgICBwb3J0OiBzdHJpbmcsXG4gICAgcnBjUG9ydDogc3RyaW5nLFxuICAgIGphZWdlckVuZHBvaW50OiBzdHJpbmcsXG4gICAgdHJhY2VTZXJ2aWNlOiBzdHJpbmcsXG4gICAgdHJhY2VUYWdzOiBzdHJpbmcsXG4gICAgYXV0aEVuZHBvaW50OiBzdHJpbmcsXG4gICAgc3RhdHNkU2VydmVyOiBzdHJpbmcsXG4gICAgc3RhdHNkVGFnczogc3RyaW5nLFxuICAgIG1hbUFjY2Vzc0tleXM6IHN0cmluZyxcbiAgICBrZWVwQWxpdmU6IHN0cmluZyxcbn1cblxudHlwZSBQcm9ncmFtRW52ID0ge1xuICAgIFFfU0VSVkVSX0hPU1Q6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9TRVJWRVJfUE9SVDogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NFUlZFUl9SUENfUE9SVDogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1JFUVVFU1RTX01PREU6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9SRVFVRVNUU19TRVJWRVI6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9SRVFVRVNUU19UT1BJQzogc3RyaW5nIHwgdm9pZCxcbiAgICBRX0RBVEFCQVNFX1NFUlZFUjogc3RyaW5nIHwgdm9pZCxcbiAgICBRX0RBVEFCQVNFX05BTUU6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9EQVRBQkFTRV9BVVRIOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfREFUQUJBU0VfTUFYX1NPQ0tFVFM6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9TTE9XX0RBVEFCQVNFX1NFUlZFUjogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NMT1dfREFUQUJBU0VfTkFNRTogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NMT1dfREFUQUJBU0VfQVVUSDogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1NMT1dfREFUQUJBU0VfTUFYX1NPQ0tFVFM6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9BVVRIX0VORFBPSU5UOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfTUFNX0FDQ0VTU19LRVlTOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfSkFFR0VSX0VORFBPSU5UOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfVFJBQ0VfU0VSVklDRTogc3RyaW5nIHwgdm9pZCxcbiAgICBRX1RSQUNFX1RBR1M6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9TVEFUU0RfU0VSVkVSOiBzdHJpbmcgfCB2b2lkLFxuICAgIFFfU1RBVFNEX1RBR1M6IHN0cmluZyB8IHZvaWQsXG4gICAgUV9LRUVQX0FMSVZFOiBzdHJpbmcgfCB2b2lkLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlUHJvdG9jb2woYWRkcmVzczogc3RyaW5nLCBkZWZhdWx0UHJvdG9jb2w6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIC9eXFx3KzpcXC9cXC8vZ2kudGVzdChhZGRyZXNzKSA/IGFkZHJlc3MgOiBgJHtkZWZhdWx0UHJvdG9jb2x9Oi8vJHthZGRyZXNzfWA7XG59XG5cbmZ1bmN0aW9uIGdldElwKCk6IHN0cmluZyB7XG4gICAgY29uc3QgaXB2NCA9IChPYmplY3QudmFsdWVzKG9zLm5ldHdvcmtJbnRlcmZhY2VzKCkpOiBhbnkpXG4gICAgICAgIC5yZWR1Y2UoKGFjYywgeCkgPT4gYWNjLmNvbmNhdCh4KSwgW10pXG4gICAgICAgIC5maW5kKHggPT4geC5mYW1pbHkgPT09ICdJUHY0JyAmJiAheC5pbnRlcm5hbCk7XG4gICAgcmV0dXJuIGlwdjQgJiYgaXB2NC5hZGRyZXNzO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRhZ3Moczogc3RyaW5nKTogeyBbc3RyaW5nXTogc3RyaW5nIH0ge1xuICAgIGNvbnN0IHRhZ3M6IHsgW3N0cmluZ106IHN0cmluZyB9ID0ge307XG4gICAgcy5zcGxpdCgnLCcpLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHQuaW5kZXhPZignPScpO1xuICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICB0YWdzW3Quc3Vic3RyKDAsIGkpXSA9IHQuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhZ3NbdF0gPSAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0YWdzO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURiQ29uZmlnKGNvbmZpZzogc3RyaW5nLCBkZWZNYXhTb2NrZXRzOiBudW1iZXIpOiBRRGJDb25maWcge1xuICAgIGNvbnN0IGxvd2VyQ2FzZWQgPSBjb25maWcudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgY29uc3QgaGFzUHJvdG9jb2wgPSBsb3dlckNhc2VkLnN0YXJ0c1dpdGgoJ2h0dHA6JykgfHwgbG93ZXJDYXNlZC5zdGFydHNXaXRoKCdodHRwczonKTtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGhhc1Byb3RvY29sID8gY29uZmlnIDogYGh0dHBzOi8vJHtjb25maWd9YCk7XG4gICAgY29uc3QgcHJvdG9jb2wgPSB1cmwucHJvdG9jb2wgfHwgJ2h0dHBzOic7XG4gICAgY29uc3QgaG9zdCA9IHVybC5wb3J0ID8gdXJsLmhvc3QgOiBgJHt1cmwuaG9zdH06ODA1OWA7XG4gICAgY29uc3QgcGF0aCA9IHVybC5wYXRobmFtZSAhPT0gJy8nID8gdXJsLnBhdGhuYW1lIDogJyc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2VydmVyOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BhdGh9YCxcbiAgICAgICAgYXV0aDogdXJsLnVzZXJuYW1lICYmIGAke3VybC51c2VybmFtZX06JHt1cmwucGFzc3dvcmR9YCxcbiAgICAgICAgbmFtZTogdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ25hbWUnKSB8fCAnYmxvY2tjaGFpbicsXG4gICAgICAgIG1heFNvY2tldHM6IE51bWJlci5wYXJzZUludCh1cmwuc2VhcmNoUGFyYW1zLmdldCgnbWF4U29ja2V0cycpIHx8IGRlZk1heFNvY2tldHMpLFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRPcHRpb25zOiBQcm9ncmFtT3B0aW9ucyA9IHtcbiAgICBob3N0OiBnZXRJcCgpLFxuICAgIHBvcnQ6ICc0MDAwJyxcbiAgICBycGNQb3J0OiAnJyxcbiAgICByZXF1ZXN0c01vZGU6ICdrYWZrYScsXG4gICAgcmVxdWVzdHNTZXJ2ZXI6ICdrYWZrYTo5MDkyJyxcbiAgICByZXF1ZXN0c1RvcGljOiAncmVxdWVzdHMnLFxuXG4gICAgZGF0YUFjY291bnRzOiAnYXJhbmdvZGInLFxuICAgIGRhdGFIb3Q6ICdhcmFuZ29kYicsXG4gICAgZGF0YUNvbGQ6ICcnLFxuICAgIGRhdGFDb2xkQ2FjaGU6ICcnLFxuXG4gICAgc2xvd1F1ZXJpZXNEYXRhQWNjb3VudHM6ICdhcmFuZ29kYicsXG4gICAgc2xvd1F1ZXJpZXNEYXRhSG90OiAnYXJhbmdvZGInLFxuICAgIHNsb3dRdWVyaWVzRGF0YUNvbGQ6ICcnLFxuICAgIHNsb3dRdWVyaWVzRGF0YUNvbGRDYWNoZTogJycsXG5cbiAgICBkYlNlcnZlcjogJ2FyYW5nb2RiOjg1MjknLFxuICAgIGRiTmFtZTogJ2Jsb2NrY2hhaW4nLFxuICAgIGRiQXV0aDogJycsXG4gICAgZGJNYXhTb2NrZXRzOiAnMTAwJyxcbiAgICBzbG93RGJTZXJ2ZXI6ICcnLFxuICAgIHNsb3dEYk5hbWU6ICcnLFxuICAgIHNsb3dEYkF1dGg6ICcnLFxuICAgIHNsb3dEYk1heFNvY2tldHM6ICczJyxcblxuICAgIGF1dGhFbmRwb2ludDogJycsXG4gICAgbWFtQWNjZXNzS2V5czogJycsXG4gICAgamFlZ2VyRW5kcG9pbnQ6ICcnLFxuICAgIHRyYWNlU2VydmljZTogJ1EgU2VydmVyJyxcbiAgICB0cmFjZVRhZ3M6ICcnLFxuICAgIHN0YXRzZFNlcnZlcjogJycsXG4gICAgc3RhdHNkVGFnczogJycsXG4gICAga2VlcEFsaXZlOiAnNjAwMDAnLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVPcHRpb25zKG9wdGlvbnM6ICRTaGFwZTxQcm9ncmFtT3B0aW9ucz4sIGVudjogUHJvZ3JhbUVudiwgZGVmYXVsdHM6IFByb2dyYW1PcHRpb25zKTogUHJvZ3JhbU9wdGlvbnMge1xuICAgIHJldHVybiB7XG4gICAgICAgIGhvc3Q6IG9wdGlvbnMuaG9zdCB8fCBlbnYuUV9TRVJWRVJfSE9TVCB8fCBkZWZhdWx0cy5ob3N0LFxuICAgICAgICBwb3J0OiBvcHRpb25zLnBvcnQgfHwgZW52LlFfU0VSVkVSX1BPUlQgfHwgZGVmYXVsdHMucG9ydCxcbiAgICAgICAgcnBjUG9ydDogb3B0aW9ucy5ycGNQb3J0IHx8IGVudi5RX1NFUlZFUl9SUENfUE9SVCB8fCBkZWZhdWx0cy5ycGNQb3J0LFxuICAgICAgICByZXF1ZXN0c01vZGU6IG9wdGlvbnMucmVxdWVzdHNNb2RlIHx8IChlbnYuUV9SRVFVRVNUU19NT0RFOiBhbnkpIHx8IGRlZmF1bHRzLnJlcXVlc3RzTW9kZSxcbiAgICAgICAgcmVxdWVzdHNTZXJ2ZXI6IG9wdGlvbnMucmVxdWVzdHNTZXJ2ZXIgfHwgZW52LlFfUkVRVUVTVFNfU0VSVkVSIHx8IGRlZmF1bHRzLnJlcXVlc3RzU2VydmVyLFxuICAgICAgICByZXF1ZXN0c1RvcGljOiBvcHRpb25zLnJlcXVlc3RzVG9waWMgfHwgZW52LlFfUkVRVUVTVFNfVE9QSUMgfHwgZGVmYXVsdHMucmVxdWVzdHNUb3BpYyxcbiAgICAgICAgZGJTZXJ2ZXI6IG9wdGlvbnMuZGJTZXJ2ZXIgfHwgZW52LlFfREFUQUJBU0VfU0VSVkVSIHx8IGRlZmF1bHRzLmRiU2VydmVyLFxuICAgICAgICBkYk5hbWU6IG9wdGlvbnMuZGJOYW1lIHx8IGVudi5RX0RBVEFCQVNFX05BTUUgfHwgZGVmYXVsdHMuZGJOYW1lLFxuICAgICAgICBkYkF1dGg6IG9wdGlvbnMuZGJBdXRoIHx8IGVudi5RX0RBVEFCQVNFX0FVVEggfHwgZGVmYXVsdHMuZGJBdXRoLFxuICAgICAgICBkYk1heFNvY2tldHM6IG9wdGlvbnMuZGJNYXhTb2NrZXRzIHx8IGVudi5RX0RBVEFCQVNFX01BWF9TT0NLRVRTIHx8IGRlZmF1bHRzLmRiTWF4U29ja2V0cyxcbiAgICAgICAgc2xvd0RiU2VydmVyOiBvcHRpb25zLnNsb3dEYlNlcnZlciB8fCBlbnYuUV9TTE9XX0RBVEFCQVNFX1NFUlZFUiB8fCBkZWZhdWx0cy5zbG93RGJTZXJ2ZXIsXG4gICAgICAgIHNsb3dEYk5hbWU6IG9wdGlvbnMuc2xvd0RiTmFtZSB8fCBlbnYuUV9TTE9XX0RBVEFCQVNFX05BTUUgfHwgZGVmYXVsdHMuc2xvd0RiTmFtZSxcbiAgICAgICAgc2xvd0RiQXV0aDogb3B0aW9ucy5zbG93RGJBdXRoIHx8IGVudi5RX1NMT1dfREFUQUJBU0VfQVVUSCB8fCBkZWZhdWx0cy5zbG93RGJBdXRoLFxuICAgICAgICBzbG93RGJNYXhTb2NrZXRzOiBvcHRpb25zLnNsb3dEYk1heFNvY2tldHMgfHwgZW52LlFfU0xPV19EQVRBQkFTRV9NQVhfU09DS0VUUyB8fCBkZWZhdWx0cy5zbG93RGJNYXhTb2NrZXRzLFxuICAgICAgICBhdXRoRW5kcG9pbnQ6IG9wdGlvbnMuYXV0aEVuZHBvaW50IHx8IGVudi5RX0FVVEhfRU5EUE9JTlQgfHwgZGVmYXVsdHMuYXV0aEVuZHBvaW50LFxuICAgICAgICBtYW1BY2Nlc3NLZXlzOiBvcHRpb25zLm1hbUFjY2Vzc0tleXMgfHwgZW52LlFfTUFNX0FDQ0VTU19LRVlTIHx8IGRlZmF1bHRzLm1hbUFjY2Vzc0tleXMsXG4gICAgICAgIGphZWdlckVuZHBvaW50OiBvcHRpb25zLmphZWdlckVuZHBvaW50IHx8IGVudi5RX0pBRUdFUl9FTkRQT0lOVCB8fCBkZWZhdWx0cy5qYWVnZXJFbmRwb2ludCxcbiAgICAgICAgdHJhY2VTZXJ2aWNlOiBvcHRpb25zLnRyYWNlU2VydmljZSB8fCBlbnYuUV9UUkFDRV9TRVJWSUNFIHx8IGRlZmF1bHRzLnRyYWNlU2VydmljZSxcbiAgICAgICAgdHJhY2VUYWdzOiBvcHRpb25zLnRyYWNlVGFncyB8fCBlbnYuUV9UUkFDRV9UQUdTIHx8IGRlZmF1bHRzLnRyYWNlVGFncyxcbiAgICAgICAgc3RhdHNkU2VydmVyOiBvcHRpb25zLnN0YXRzZFNlcnZlciB8fCBlbnYuUV9TVEFUU0RfU0VSVkVSIHx8IGRlZmF1bHRzLnN0YXRzZFNlcnZlcixcbiAgICAgICAgc3RhdHNkVGFnczogb3B0aW9ucy5zdGF0c2RUYWdzIHx8IGVudi5RX1NUQVRTRF9UQUdTIHx8IGRlZmF1bHRzLnN0YXRzZFRhZ3MsXG4gICAgICAgIGtlZXBBbGl2ZTogb3B0aW9ucy5rZWVwQWxpdmUgfHwgZW52LlFfS0VFUF9BTElWRSB8fCBkZWZhdWx0cy5rZWVwQWxpdmUsXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbmZpZyhvcHRpb25zOiAkU2hhcGU8UHJvZ3JhbU9wdGlvbnM+LCBlbnY6IFByb2dyYW1FbnYsIGRlZmF1bHRzOiBQcm9ncmFtT3B0aW9ucyk6IFFDb25maWcge1xuICAgIGNvbnN0IHJlc29sdmVkT3B0aW9ucyA9IHJlc29sdmVPcHRpb25zKG9wdGlvbnMsIGVudiwgZGVmYXVsdHMpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZlcjoge1xuICAgICAgICAgICAgaG9zdDogcmVzb2x2ZWRPcHRpb25zLmhvc3QsXG4gICAgICAgICAgICBwb3J0OiBOdW1iZXIucGFyc2VJbnQocmVzb2x2ZWRPcHRpb25zLnBvcnQpLFxuICAgICAgICAgICAgcnBjUG9ydDogcmVzb2x2ZWRPcHRpb25zLnJwY1BvcnQsXG4gICAgICAgICAgICBrZWVwQWxpdmU6IE51bWJlci5wYXJzZUludChyZXNvbHZlZE9wdGlvbnMua2VlcEFsaXZlKSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWVzdHM6IHtcbiAgICAgICAgICAgIG1vZGU6IHJlc29sdmVkT3B0aW9ucy5yZXF1ZXN0c01vZGUsXG4gICAgICAgICAgICBzZXJ2ZXI6IHJlc29sdmVkT3B0aW9ucy5yZXF1ZXN0c1NlcnZlcixcbiAgICAgICAgICAgIHRvcGljOiByZXNvbHZlZE9wdGlvbnMucmVxdWVzdHNUb3BpYyxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YWJhc2U6IHtcbiAgICAgICAgICAgIHNlcnZlcjogcmVzb2x2ZWRPcHRpb25zLmRiU2VydmVyLFxuICAgICAgICAgICAgbmFtZTogcmVzb2x2ZWRPcHRpb25zLmRiTmFtZSxcbiAgICAgICAgICAgIGF1dGg6IHJlc29sdmVkT3B0aW9ucy5kYkF1dGgsXG4gICAgICAgICAgICBtYXhTb2NrZXRzOiBOdW1iZXIocmVzb2x2ZWRPcHRpb25zLmRiTWF4U29ja2V0cyksXG4gICAgICAgIH0sXG4gICAgICAgIHNsb3dEYXRhYmFzZToge1xuICAgICAgICAgICAgc2VydmVyOiByZXNvbHZlZE9wdGlvbnMuc2xvd0RiU2VydmVyIHx8IHJlc29sdmVkT3B0aW9ucy5kYlNlcnZlcixcbiAgICAgICAgICAgIG5hbWU6IHJlc29sdmVkT3B0aW9ucy5zbG93RGJOYW1lIHx8IHJlc29sdmVkT3B0aW9ucy5kYk5hbWUsXG4gICAgICAgICAgICBhdXRoOiByZXNvbHZlZE9wdGlvbnMuc2xvd0RiQXV0aCB8fCByZXNvbHZlZE9wdGlvbnMuZGJBdXRoLFxuICAgICAgICAgICAgbWF4U29ja2V0czogTnVtYmVyKHJlc29sdmVkT3B0aW9ucy5zbG93RGJNYXhTb2NrZXRzKSxcbiAgICAgICAgfSxcbiAgICAgICAgbGlzdGVuZXI6IHtcbiAgICAgICAgICAgIHJlc3RhcnRUaW1lb3V0OiAxMDAwLFxuICAgICAgICB9LFxuICAgICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgICAgICBlbmRwb2ludDogcmVzb2x2ZWRPcHRpb25zLmF1dGhFbmRwb2ludCxcbiAgICAgICAgfSxcbiAgICAgICAgamFlZ2VyOiB7XG4gICAgICAgICAgICBlbmRwb2ludDogcmVzb2x2ZWRPcHRpb25zLmphZWdlckVuZHBvaW50LFxuICAgICAgICAgICAgc2VydmljZTogcmVzb2x2ZWRPcHRpb25zLnRyYWNlU2VydmljZSxcbiAgICAgICAgICAgIHRhZ3M6IHBhcnNlVGFncyhyZXNvbHZlZE9wdGlvbnMudHJhY2VUYWdzKSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdHNkOiB7XG4gICAgICAgICAgICBzZXJ2ZXI6IHJlc29sdmVkT3B0aW9ucy5zdGF0c2RTZXJ2ZXIsXG4gICAgICAgICAgICB0YWdzOiAocmVzb2x2ZWRPcHRpb25zLnN0YXRzZFRhZ3MgfHwgJycpLnNwbGl0KCcsJykubWFwKHggPT4geC50cmltKCkpLmZpbHRlcih4ID0+IHgpLFxuICAgICAgICB9LFxuICAgICAgICBtYW1BY2Nlc3NLZXlzOiBuZXcgU2V0KChyZXNvbHZlZE9wdGlvbnMubWFtQWNjZXNzS2V5cyB8fCAnJykuc3BsaXQoJywnKSksXG4gICAgfTtcbn1cblxuZXhwb3J0IHR5cGUgSW5kZXhJbmZvID0ge1xuICAgIGZpZWxkczogc3RyaW5nW10sXG4gICAgdHlwZT86IHN0cmluZyxcbn1cblxuZXhwb3J0IHR5cGUgQ29sbGVjdGlvbkluZm8gPSB7XG4gICAgbmFtZT86IHN0cmluZyxcbiAgICBpbmRleGVzOiBJbmRleEluZm9bXSxcbn07XG5cbmV4cG9ydCB0eXBlIERiSW5mbyA9IHtcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgY29sbGVjdGlvbnM6IHtcbiAgICAgICAgW3N0cmluZ106IENvbGxlY3Rpb25JbmZvLFxuICAgIH1cbn1cblxuZnVuY3Rpb24gc29ydGVkSW5kZXgoZmllbGRzOiBzdHJpbmdbXSk6IEluZGV4SW5mbyB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3BlcnNpc3RlbnQnLFxuICAgICAgICBmaWVsZHMsXG4gICAgfTtcbn1cblxuY29uc3QgQkxPQ0tDSEFJTjoge1xuICAgIG5hbWU6IHN0cmluZyxcbiAgICBjb2xsZWN0aW9uczoge1xuICAgICAgICBbc3RyaW5nXTogQ29sbGVjdGlvbkluZm8sXG4gICAgfVxufSA9IHtcbiAgICBuYW1lOiAnYmxvY2tjaGFpbicsXG4gICAgY29sbGVjdGlvbnM6IHtcbiAgICAgICAgYmxvY2tzOiB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydzZXFfbm8nLCAnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnd29ya2NoYWluX2lkJywgJ3NoYXJkJywgJ3NlcV9ubyddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3dvcmtjaGFpbl9pZCcsICdzaGFyZCcsICdnZW5fdXRpbWUnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnc2VxX25vJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnd29ya2NoYWluX2lkJywgJ2dlbl91dGltZSddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ21hc3Rlci5taW5fc2hhcmRfZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsncHJldl9yZWYucm9vdF9oYXNoJywgJ19rZXknXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydwcmV2X2FsdF9yZWYucm9vdF9oYXNoJywgJ19rZXknXSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnbGFzdF90cmFuc19sdCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2JhbGFuY2UnXSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYmxvY2tfaWQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd2YWx1ZScsICdjcmVhdGVkX2F0J10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnc3JjJywgJ3ZhbHVlJywgJ2NyZWF0ZWRfYXQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydkc3QnLCAndmFsdWUnLCAnY3JlYXRlZF9hdCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3NyYycsICdjcmVhdGVkX2F0J10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnZHN0JywgJ2NyZWF0ZWRfYXQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydjcmVhdGVkX2x0J10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnY3JlYXRlZF9hdCddKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zYWN0aW9uczoge1xuICAgICAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYmxvY2tfaWQnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydpbl9tc2cnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydvdXRfbXNnc1sqXSddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2FjY291bnRfYWRkcicsICdub3cnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydub3cnXSksXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydsdCddKSxcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2FjY291bnRfYWRkcicsICdvcmlnX3N0YXR1cycsICdlbmRfc3RhdHVzJ10pLFxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnbm93JywgJ2FjY291bnRfYWRkcicsICdsdCddKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIGJsb2Nrc19zaWduYXR1cmVzOiB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydzaWduYXR1cmVzWypdLm5vZGVfaWQnLCAnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IEJMT0NLQ0hBSU5fREI6IERiSW5mbyA9IHtcbiAgICAuLi5CTE9DS0NIQUlOLFxuICAgIGxhc3RVcGRhdGVUaW1lOiAwLFxufTtcblxuT2JqZWN0LmVudHJpZXMoQkxPQ0tDSEFJTi5jb2xsZWN0aW9ucykuZm9yRWFjaCgoW25hbWUsIGNvbGxlY3Rpb25NaXhlZF0pID0+IHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gKChjb2xsZWN0aW9uTWl4ZWQ6IGFueSk6IENvbGxlY3Rpb25JbmZvKTtcbiAgICBjb2xsZWN0aW9uLm5hbWUgPSBuYW1lO1xuICAgIGNvbGxlY3Rpb24uaW5kZXhlcy5wdXNoKHsgZmllbGRzOiBbJ19rZXknXSB9KTtcbn0pO1xuXG5leHBvcnQgY29uc3QgU1RBVFMgPSB7XG4gICAgc3RhcnQ6ICdzdGFydCcsXG4gICAgcHJlZml4OiAncXNlcnZlci4nLFxuICAgIGRvYzoge1xuICAgICAgICBjb3VudDogJ2RvYy5jb3VudCcsXG4gICAgfSxcbiAgICBwb3N0OiB7XG4gICAgICAgIGNvdW50OiAncG9zdC5jb3VudCcsXG4gICAgICAgIGZhaWxlZDogJ3Bvc3QuZmFpbGVkJyxcbiAgICB9LFxuICAgIHF1ZXJ5OiB7XG4gICAgICAgIGNvdW50OiAncXVlcnkuY291bnQnLFxuICAgICAgICB0aW1lOiAncXVlcnkudGltZScsXG4gICAgICAgIGFjdGl2ZTogJ3F1ZXJ5LmFjdGl2ZScsXG4gICAgICAgIGZhaWxlZDogJ3F1ZXJ5LmZhaWxlZCcsXG4gICAgICAgIHNsb3c6ICdxdWVyeS5zbG93JyxcbiAgICB9LFxuICAgIHN1YnNjcmlwdGlvbjoge1xuICAgICAgICBhY3RpdmU6ICdzdWJzY3JpcHRpb24uYWN0aXZlJyxcbiAgICB9LFxuICAgIHdhaXRGb3I6IHtcbiAgICAgICAgYWN0aXZlOiAnd2FpdGZvci5hY3RpdmUnLFxuICAgIH0sXG59O1xuXG4iXX0=