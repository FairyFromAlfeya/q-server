"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resolversMam = void 0;

var _fs = _interopRequireDefault(require("fs"));

var _arango = _interopRequireDefault(require("./arango"));

var _path = _interopRequireDefault(require("path"));

// Query
function info() {
  var pkg = JSON.parse(_fs["default"].readFileSync(_path["default"].resolve(__dirname, '..', '..', 'package.json')));
  return {
    version: pkg.version
  };
} // Mutation


function getChangeLog(_parent, args, context) {
  return context.db.changeLog.get(args.id);
}

function setChangeLog(_parent, args, context) {
  if (args.op === 'CLEAR') {
    context.db.changeLog.clear();
  } else if (args.op === 'ON') {
    context.db.changeLog.enabled = true;
  } else if (args.op === 'OFF') {
    context.db.changeLog.enabled = false;
  }

  return 1;
}

var resolversMam = {
  Query: {
    info: info,
    getChangeLog: getChangeLog
  },
  Mutation: {
    setChangeLog: setChangeLog
  }
};
exports.resolversMam = resolversMam;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9yZXNvbHZlcnMtbWFtLmpzIl0sIm5hbWVzIjpbImluZm8iLCJwa2ciLCJKU09OIiwicGFyc2UiLCJmcyIsInJlYWRGaWxlU3luYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwidmVyc2lvbiIsImdldENoYW5nZUxvZyIsIl9wYXJlbnQiLCJhcmdzIiwiY29udGV4dCIsImRiIiwiY2hhbmdlTG9nIiwiZ2V0IiwiaWQiLCJzZXRDaGFuZ2VMb2ciLCJvcCIsImNsZWFyIiwiZW5hYmxlZCIsInJlc29sdmVyc01hbSIsIlF1ZXJ5IiwiTXV0YXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUVBOztBQUNBOztBQUVBOztBQVlBO0FBRUEsU0FBU0EsSUFBVCxHQUFzQjtBQUNsQixNQUFNQyxHQUFHLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFZQyxlQUFHQyxZQUFILENBQWdCQyxpQkFBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLElBQXhCLEVBQThCLElBQTlCLEVBQW9DLGNBQXBDLENBQWhCLENBQVosQ0FBWjtBQUNBLFNBQU87QUFDSEMsSUFBQUEsT0FBTyxFQUFFUixHQUFHLENBQUNRO0FBRFYsR0FBUDtBQUdILEMsQ0FFRDs7O0FBRUEsU0FBU0MsWUFBVCxDQUFzQkMsT0FBdEIsRUFBb0NDLElBQXBDLEVBQXlEQyxPQUF6RCxFQUFxRjtBQUNqRixTQUFPQSxPQUFPLENBQUNDLEVBQVIsQ0FBV0MsU0FBWCxDQUFxQkMsR0FBckIsQ0FBeUJKLElBQUksQ0FBQ0ssRUFBOUIsQ0FBUDtBQUNIOztBQUVELFNBQVNDLFlBQVQsQ0FBc0JQLE9BQXRCLEVBQW9DQyxJQUFwQyxFQUF5REMsT0FBekQsRUFBbUY7QUFDL0UsTUFBSUQsSUFBSSxDQUFDTyxFQUFMLEtBQVksT0FBaEIsRUFBeUI7QUFDckJOLElBQUFBLE9BQU8sQ0FBQ0MsRUFBUixDQUFXQyxTQUFYLENBQXFCSyxLQUFyQjtBQUNILEdBRkQsTUFFTyxJQUFJUixJQUFJLENBQUNPLEVBQUwsS0FBWSxJQUFoQixFQUFzQjtBQUN6Qk4sSUFBQUEsT0FBTyxDQUFDQyxFQUFSLENBQVdDLFNBQVgsQ0FBcUJNLE9BQXJCLEdBQStCLElBQS9CO0FBQ0gsR0FGTSxNQUVBLElBQUlULElBQUksQ0FBQ08sRUFBTCxLQUFZLEtBQWhCLEVBQXVCO0FBQzFCTixJQUFBQSxPQUFPLENBQUNDLEVBQVIsQ0FBV0MsU0FBWCxDQUFxQk0sT0FBckIsR0FBK0IsS0FBL0I7QUFDSDs7QUFDRCxTQUFPLENBQVA7QUFDSDs7QUFFTSxJQUFNQyxZQUFZLEdBQUc7QUFDeEJDLEVBQUFBLEtBQUssRUFBRTtBQUNIdkIsSUFBQUEsSUFBSSxFQUFKQSxJQURHO0FBRUhVLElBQUFBLFlBQVksRUFBWkE7QUFGRyxHQURpQjtBQUt4QmMsRUFBQUEsUUFBUSxFQUFFO0FBQ05OLElBQUFBLFlBQVksRUFBWkE7QUFETTtBQUxjLENBQXJCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IEFyYW5nbyBmcm9tIFwiLi9hcmFuZ29cIjtcbmltcG9ydCB0eXBlIHsgUUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbnR5cGUgSW5mbyA9IHtcbiAgICB2ZXJzaW9uOiBzdHJpbmcsXG59XG5cbnR5cGUgQ29udGV4dCA9IHtcbiAgICBkYjogQXJhbmdvLFxuICAgIGNvbmZpZzogUUNvbmZpZyxcbiAgICBzaGFyZWQ6IE1hcDxzdHJpbmcsIGFueT4sXG59XG5cbi8vIFF1ZXJ5XG5cbmZ1bmN0aW9uIGluZm8oKTogSW5mbyB7XG4gICAgY29uc3QgcGtnID0gSlNPTi5wYXJzZSgoZnMucmVhZEZpbGVTeW5jKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLicsICcuLicsICdwYWNrYWdlLmpzb24nKSk6IGFueSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHZlcnNpb246IHBrZy52ZXJzaW9uLFxuICAgIH07XG59XG5cbi8vIE11dGF0aW9uXG5cbmZ1bmN0aW9uIGdldENoYW5nZUxvZyhfcGFyZW50OiBhbnksIGFyZ3M6IHsgaWQ6IHN0cmluZ30sIGNvbnRleHQ6IENvbnRleHQpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIGNvbnRleHQuZGIuY2hhbmdlTG9nLmdldChhcmdzLmlkKTtcbn1cblxuZnVuY3Rpb24gc2V0Q2hhbmdlTG9nKF9wYXJlbnQ6IGFueSwgYXJnczogeyBvcDogc3RyaW5nfSwgY29udGV4dDogQ29udGV4dCk6IG51bWJlciB7XG4gICAgaWYgKGFyZ3Mub3AgPT09ICdDTEVBUicpIHtcbiAgICAgICAgY29udGV4dC5kYi5jaGFuZ2VMb2cuY2xlYXIoKTtcbiAgICB9IGVsc2UgaWYgKGFyZ3Mub3AgPT09ICdPTicpIHtcbiAgICAgICAgY29udGV4dC5kYi5jaGFuZ2VMb2cuZW5hYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChhcmdzLm9wID09PSAnT0ZGJykge1xuICAgICAgICBjb250ZXh0LmRiLmNoYW5nZUxvZy5lbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAxO1xufVxuXG5leHBvcnQgY29uc3QgcmVzb2x2ZXJzTWFtID0ge1xuICAgIFF1ZXJ5OiB7XG4gICAgICAgIGluZm8sXG4gICAgICAgIGdldENoYW5nZUxvZyxcbiAgICB9LFxuICAgIE11dGF0aW9uOiB7XG4gICAgICAgIHNldENoYW5nZUxvZyxcbiAgICB9LFxufTtcbiJdfQ==