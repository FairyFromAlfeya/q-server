"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.u8enum = u8enum;
exports.otherCurrencyCollection = exports.OtherCurrency = exports.grams = exports.unixSeconds = exports.unixMilliseconds = exports.u32WithFormatter = exports.u128 = exports.u64 = exports.u32 = exports.u16 = exports.u8 = exports.i32 = exports.i8 = exports.required = exports.withDoc = exports.join = void 0;

var _schema = require("ton-labs-dev-ops/dist/src/schema");

const {
  ref,
  arrayOf
} = _schema.Def;
const ToStringFormatter = {
  unixMillisecondsToString: 'unixMillisecondsToString',
  unixSecondsToString: 'unixSecondsToString'
};

const join = (refDef, on, refOn, preCondition) => {
  return { ...ref(refDef),
    _: {
      join: {
        on,
        refOn,
        preCondition: preCondition || ''
      }
    }
  };
};

exports.join = join;

const withDoc = (def, doc) => ({ ...def,
  ...(doc ? {
    _doc: doc
  } : {})
});

exports.withDoc = withDoc;

const required = def => def;

exports.required = required;

const uint = (size, doc) => withDoc({
  _int: {
    unsigned: true,
    size
  }
}, doc);

const int = (size, doc) => withDoc({
  _int: {
    unsigned: false,
    size
  }
}, doc);

const i8 = doc => int(8, doc);

exports.i8 = i8;

const i32 = doc => int(32, doc);

exports.i32 = i32;

const u8 = doc => uint(8, doc);

exports.u8 = u8;

const u16 = doc => uint(16, doc);

exports.u16 = u16;

const u32 = doc => uint(32, doc);

exports.u32 = u32;

const u64 = doc => uint(64, doc);

exports.u64 = u64;

const u128 = doc => uint(128, doc);

exports.u128 = u128;

const u256 = doc => uint(256, doc);

const u32WithFormatter = (formatter, doc) => withDoc({
  _int: {
    unsigned: true,
    size: 32
  },
  _: {
    formatter
  }
}, doc);

exports.u32WithFormatter = u32WithFormatter;

const unixMilliseconds = doc => u32WithFormatter(ToStringFormatter.unixMillisecondsToString, doc);

exports.unixMilliseconds = unixMilliseconds;

const unixSeconds = doc => u32WithFormatter(ToStringFormatter.unixSecondsToString, doc);

exports.unixSeconds = unixSeconds;
const grams = u128;
exports.grams = grams;

function u8enum(name, values) {
  return doc => {
    const valuesDoc = Object.entries(values).map(([name, value]) => {
      return `- ${value} â€“ ${name}`;
    }).join('\n');
    const effectiveDoc = `${doc ? `${doc}\n` : ''}${valuesDoc}`;
    return withDoc({
      _int: {
        unsigned: true,
        size: 8
      },
      _: {
        enum: {
          name,
          values
        }
      }
    }, effectiveDoc);
  };
}

const OtherCurrency = {
  currency: u32(),
  value: u256()
};
exports.OtherCurrency = OtherCurrency;

const otherCurrencyCollection = doc => arrayOf(ref({
  OtherCurrency
}), doc);

exports.otherCurrencyCollection = otherCurrencyCollection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9zY2hlbWEvZGItc2NoZW1hLXR5cGVzLmpzIl0sIm5hbWVzIjpbInJlZiIsImFycmF5T2YiLCJEZWYiLCJUb1N0cmluZ0Zvcm1hdHRlciIsInVuaXhNaWxsaXNlY29uZHNUb1N0cmluZyIsInVuaXhTZWNvbmRzVG9TdHJpbmciLCJqb2luIiwicmVmRGVmIiwib24iLCJyZWZPbiIsInByZUNvbmRpdGlvbiIsIl8iLCJ3aXRoRG9jIiwiZGVmIiwiZG9jIiwiX2RvYyIsInJlcXVpcmVkIiwidWludCIsInNpemUiLCJfaW50IiwidW5zaWduZWQiLCJpbnQiLCJpOCIsImkzMiIsInU4IiwidTE2IiwidTMyIiwidTY0IiwidTEyOCIsInUyNTYiLCJ1MzJXaXRoRm9ybWF0dGVyIiwiZm9ybWF0dGVyIiwidW5peE1pbGxpc2Vjb25kcyIsInVuaXhTZWNvbmRzIiwiZ3JhbXMiLCJ1OGVudW0iLCJuYW1lIiwidmFsdWVzIiwidmFsdWVzRG9jIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsInZhbHVlIiwiZWZmZWN0aXZlRG9jIiwiZW51bSIsIk90aGVyQ3VycmVuY3kiLCJjdXJyZW5jeSIsIm90aGVyQ3VycmVuY3lDb2xsZWN0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBOztBQUdBLE1BQU07QUFBQ0EsRUFBQUEsR0FBRDtBQUFNQyxFQUFBQTtBQUFOLElBQWlCQyxXQUF2QjtBQUVBLE1BQU1DLGlCQUFpQixHQUFHO0FBQ3RCQyxFQUFBQSx3QkFBd0IsRUFBRSwwQkFESjtBQUV0QkMsRUFBQUEsbUJBQW1CLEVBQUU7QUFGQyxDQUExQjs7QUFRTyxNQUFNQyxJQUFJLEdBQUcsQ0FDaEJDLE1BRGdCLEVBRWhCQyxFQUZnQixFQUdoQkMsS0FIZ0IsRUFJaEJDLFlBSmdCLEtBS047QUFDVixTQUFPLEVBQ0gsR0FBR1YsR0FBRyxDQUFDTyxNQUFELENBREg7QUFFSEksSUFBQUEsQ0FBQyxFQUFFO0FBQ0NMLE1BQUFBLElBQUksRUFBRTtB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USxLQUFLQSxLQUFZLE1BQUtOLElBQUssRUFBbkM7QUFDSCxLQUZpQixFQUVmOUIsSUFGZSxDQUVWLElBRlUsQ0FBbEI7QUFHQSxVQUFNcUMsWUFBWSxHQUFJLEdBQUU3QixHQUFHLEdBQUksR0FBRUEsR0FBSSxJQUFWLEdBQWdCLEVBQUcsR0FBRXdCLFNBQVUsRUFBMUQ7QUFDQSxXQUFPMUIsT0FBTyxDQUFDO0FBQ1hPLE1BQUFBLElBQUksRUFBRTtBQUNGQyxRQUFBQSxRQUFRLEVBQUUsSUFEUjtBQUVGRixRQUFBQSxJQUFJLEVBQUU7QUFGSixPQURLO0FBS1hQLE1BQUFBLENBQUMsRUFBRTtBQUNDaUMsUUFBQUEsSUFBSSxFQUFFO0FBQ0ZSLFVBQUFBLElBREU7QUFFRkMsVUFBQUE7QUFGRTtBQURQO0FBTFEsS0FBRCxFQVdYTSxZQVhXLENBQWQ7QUFZSCxHQWpCRDtBQWtCSDs7QUFFTSxNQUFNRSxhQUFzQixHQUFHO0FBQ2xDQyxFQUFBQSxRQUFRLEVBQUVwQixHQUFHLEVBRHFCO0FBRWxDZ0IsRUFBQUEsS0FBSyxFQUFFYixJQUFJO0FBRnVCLENBQS9COzs7QUFLQSxNQUFNa0IsdUJBQXVCLEdBQUlqQyxHQUFELElBQTJCYixPQUFPLENBQUNELEdBQUcsQ0FBQztBQUFDNkMsRUFBQUE7QUFBRCxDQUFELENBQUosRUFBdUIvQixHQUF2QixDQUFsRSIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQge0RlZn0gZnJvbSBcInRvbi1sYWJzLWRldi1vcHMvZGlzdC9zcmMvc2NoZW1hXCI7XG5pbXBvcnQgdHlwZSB7SW50U2l6ZVR5cGUsIFR5cGVEZWZ9IGZyb20gXCJ0b24tbGFicy1kZXYtb3BzL3NyYy9zY2hlbWFcIjtcblxuY29uc3Qge3JlZiwgYXJyYXlPZn0gPSBEZWY7XG5cbmNvbnN0IFRvU3RyaW5nRm9ybWF0dGVyID0ge1xuICAgIHVuaXhNaWxsaXNlY29uZHNUb1N0cmluZzogJ3VuaXhNaWxsaXNlY29uZHNUb1N0cmluZycsXG4gICAgdW5peFNlY29uZHNUb1N0cmluZzogJ3VuaXhTZWNvbmRzVG9TdHJpbmcnLFxuXG59XG5cbmV4cG9ydCB0eXBlIFRvU3RyaW5nRm9ybWF0dGVyVHlwZSA9ICRWYWx1ZXM8dHlwZW9mIFRvU3RyaW5nRm9ybWF0dGVyPjtcblxuZXhwb3J0IGNvbnN0IGpvaW4gPSAoXG4gICAgcmVmRGVmOiAoc3RyaW5nIHwgeyBbc3RyaW5nXTogVHlwZURlZiB9KSxcbiAgICBvbjogc3RyaW5nLFxuICAgIHJlZk9uOiBzdHJpbmcsXG4gICAgcHJlQ29uZGl0aW9uPzogc3RyaW5nLFxuKTogVHlwZURlZiA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVmKHJlZkRlZiksXG4gICAgICAgIF86IHtcbiAgICAgICAgICAgIGpvaW46IHtcbiAgICAgICAgICAgICAgICBvbixcbiAgICAgICAgICAgICAgICByZWZPbixcbiAgICAgICAgICAgICAgICBwcmVDb25kaXRpb246IChwcmVDb25kaXRpb24gfHwgJycpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3Qgd2l0aERvYyA9IChkZWY6IFR5cGVEZWYsIGRvYz86IHN0cmluZykgPT4gKHtcbiAgICAuLi5kZWYsXG4gICAgLi4uKGRvYyA/IHtfZG9jOiBkb2N9IDoge30pLFxufSk7XG5cbmV4cG9ydCBjb25zdCByZXF1aXJlZCA9IChkZWY6IFR5cGVEZWYpID0+IGRlZjtcblxuY29uc3QgdWludCA9IChzaXplOiBJbnRTaXplVHlwZSwgZG9jPzogc3RyaW5nKSA9PiB3aXRoRG9jKHtcbiAgICBfaW50OiB7XG4gICAgICAgIHVuc2lnbmVkOiB0cnVlLFxuICAgICAgICBzaXplLFxuICAgIH0sXG59LCBkb2MpO1xuXG5jb25zdCBpbnQgPSAoc2l6ZTogSW50U2l6ZVR5cGUsIGRvYz86IHN0cmluZykgPT4gd2l0aERvYyh7XG4gICAgX2ludDoge1xuICAgICAgICB1bnNpZ25lZDogZmFsc2UsXG4gICAgICAgIHNpemUsXG4gICAgfSxcbn0sIGRvYyk7XG5cbmV4cG9ydCBjb25zdCBpOCA9IChkb2M/OiBzdHJpbmcpID0+IGludCg4LCBkb2MpO1xuZXhwb3J0IGNvbnN0IGkzMiA9IChkb2M/OiBzdHJpbmcpID0+IGludCgzMiwgZG9jKTtcbmV4cG9ydCBjb25zdCB1OCA9IChkb2M/OiBzdHJpbmcpID0+IHVpbnQoOCwgZG9jKTtcbmV4cG9ydCBjb25zdCB1MTYgPSAoZG9jPzogc3RyaW5nKSA9PiB1aW50KDE2LCBkb2MpO1xuZXhwb3J0IGNvbnN0IHUzMiA9IChkb2M/OiBzdHJpbmcpID0+IHVpbnQoMzIsIGRvYyk7XG5leHBvcnQgY29uc3QgdTY0ID0gKGRvYz86IHN0cmluZykgPT4gdWludCg2NCwgZG9jKTtcbmV4cG9ydCBjb25zdCB1MTI4ID0gKGRvYz86IHN0cmluZykgPT4gdWludCgxMjgsIGRvYyk7XG5jb25zdCB1MjU2ID0gKGRvYz86IHN0cmluZykgPT4gdWludCgyNTYsIGRvYyk7XG5cbmV4cG9ydCBjb25zdCB1MzJXaXRoRm9ybWF0dGVyID0gKGZvcm1hdHRlcjogVG9TdHJpbmdGb3JtYXR0ZXJUeXBlLCBkb2M/OiBzdHJpbmcpID0+IHdpdGhEb2Moe1xuICAgIF9pbnQ6IHtcbiAgICAgICAgdW5zaWduZWQ6IHRydWUsXG4gICAgICAgIHNpemU6IDMyLFxuICAgIH0sXG4gICAgXzoge1xuICAgICAgICBmb3JtYXR0ZXIsXG4gICAgfSxcbn0sIGRvYyk7XG5cbmV4cG9ydCBjb25zdCB1bml4TWlsbGlzZWNvbmRzID0gKGRvYz86IHN0cmluZykgPT4gdTMyV2l0aEZvcm1hdHRlcihUb1N0cmluZ0Zvcm1hdHRlci51bml4TWlsbGlzZWNvbmRzVG9TdHJpbmcsIGRvYyk7XG5leHBvcnQgY29uc3QgdW5peFNlY29uZHMgPSAoZG9jPzogc3RyaW5nKSA9PiB1MzJXaXRoRm9ybWF0dGVyKFRvU3RyaW5nRm9ybWF0dGVyLnVuaXhTZWNvbmRzVG9TdHJpbmcsIGRvYyk7XG5cbmV4cG9ydCBjb25zdCBncmFtcyA9IHUxMjg7XG5cbnR5cGUgSW50RW51bVZhbHVlcyA9IHtcbiAgICBbc3RyaW5nXTogbnVtYmVyXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdThlbnVtKG5hbWU6IHN0cmluZywgdmFsdWVzOiBJbnRFbnVtVmFsdWVzKSB7XG4gICAgcmV0dXJuIChkb2M/OiBzdHJpbmcpOiBUeXBlRGVmID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWVzRG9jID0gT2JqZWN0LmVudHJpZXModmFsdWVzKS5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBgLSAkeyh2YWx1ZTogYW55KX0g4oCTICR7bmFtZX1gO1xuICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlRG9jID0gYCR7ZG9jID8gYCR7ZG9jfVxcbmAgOiAnJ30ke3ZhbHVlc0RvY31gO1xuICAgICAgICByZXR1cm4gd2l0aERvYyh7XG4gICAgICAgICAgICBfaW50OiB7XG4gICAgICAgICAgICAgICAgdW5zaWduZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogOCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfOiB7XG4gICAgICAgICAgICAgICAgZW51bToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIGVmZmVjdGl2ZURvYyk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgT3RoZXJDdXJyZW5jeTogVHlwZURlZiA9IHtcbiAgICBjdXJyZW5jeTogdTMyKCksXG4gICAgdmFsdWU6IHUyNTYoKSxcbn07XG5cbmV4cG9ydCBjb25zdCBvdGhlckN1cnJlbmN5Q29sbGVjdGlvbiA9IChkb2M/OiBzdHJpbmcpOiBUeXBlRGVmID0+IGFycmF5T2YocmVmKHtPdGhlckN1cnJlbmN5fSksIGRvYyk7XG4iXX0=